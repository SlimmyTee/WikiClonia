{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/pages/wiki/index.js","webpack:///./src/components/WikiApp/style.sass","webpack:///./src/WikiWrapper/index.js","webpack:///./src/components/WikiApp/Tooltip/style.sass","webpack:///./src/components/WikiApp/Menu/style.sass","webpack:///./src/components/WikiApp/Navigation/style.sass","webpack:///./src/hooks/useFetch.js","webpack:///./src/hooks/useWiki.js","webpack:///./src/components/WikiApp/Article/index.js","webpack:///./src/scss/main.scss","webpack:///./src/components/WikiApp/index.js","webpack:///./src/components/WikiApp/Content/index.js","webpack:///./src/components/WikiApp/Elements/index.js","webpack:///./src/components/WikiApp/Tooltip/index.js","webpack:///./src/wiki_parser/index.js","webpack:///./src/components/WikiApp/Menu/index.js","webpack:///./src/asset/images/search.svg","webpack:///./src/asset/images/profile.svg","webpack:///./src/components/WikiApp/Navigation/index.js","webpack:///./src/asset/images/left.svg","webpack:///./src/asset/images/right.svg"],"names":["ReactDOM","render","document","getElementById","parseWikiText","response","main","parse","wikitext","buildURL","params","URLSearchParams","format","origin","pageContentParams","title","action","prop","page","imageParams","limit","titles","generator","gimlimit","iiprop","summaryParams","exsentences","exintro","explaintext","exsectionformat","redirects","useFetch","url","options","useState","setResponse","error","setError","isLoading","setIsLoading","useEffect","fetchData","fetch","res","json","usePageContent","pageContent","setPageContent","pageContentFetcher","useImages","images","setImages","imageFetch","imgs","query","pages","key","imageinfo","width","height","useSummary","show","summary","setSummary","summaryFetch","extract","ImagesContext","React","createContext","Math","floor","random","length","Article","replace","children","headings","App","Content","content","map","element","index","Text","text","splitText","setSplitText","paragraphs","split","i","push","Heading","className","id","heading","useRef","isElementInViewport","el","current","rect","getBoundingClientRect","top","left","bottom","window","innerHeight","documentElement","clientHeight","right","innerWidth","clientWidth","console","log","addEventListener","removeEventListener","WikiLink","displayText","e","Template","props","type","Array","isArray","attribute","subType","publisher","accessdate","JSON","stringify","Element","elementName","renderChildren","slice","valueImages","useContext","float","indexOf","caption","referenceIndex","extractSummary","maxchar","normalized","to","substr","Tooltip","setShow","setTitle","handleMouseIn","handleMouseOut","then","marginTop","marginBottom","Children","toArray","UNITS","convert","list","ABBR_UNITS","unit","abbr","taste","s","t","capitalizeFirst","string","charAt","toUpperCase","capitalize","toLowerCase","trimQuote","str","clean","obj","value","undefined","Object","keys","constructor","CiteParser","plain","R_CITE","exec","groups","attributes","pair","equalIndex","trim","ConvertParser","toMetric","fromUnit","from","possibilities","toUnit","fromSystem","describe","system","toAbbr","test","lower","singular","plural","tokens","numbers","answer","shift","toFixed","ReferenceParser","refname","refgroup","match","remain","R_HEAD","R_GROUP","R_NAME","R_FIRSTUSE","FootnoteParser","fnGroup","fnName","R_FOOTNOTE","GalleryParser","R_GALLERY","attr","R_PAIR","image","parsePairPipe","nextIndex","parsedPlain","R_KEY","PairPipe","MultipleImageParser","R_MULTIPLE_IMAGES","R_KEY_IMAGE","pairs","imageKey","imageID","supType","InfoboxParser","R_INFO","subtype","sections","section","internalParse","R_EXTERNAL","R_ARTICLE","fullUrl","nonePipe","trailingPipe","suffixStr","namespace","disambiguation","rootUrl","urlMatch","chunks","first","R_MEDIA","meta","R_OPTION","R_ATTRIBUTE","chunk","join","Comment","startToken","endToken","allowedChildren","Break","selfClose","BoldItalic","Bold","Italic","Gallery","Link","ExternalLink","Heading1","Heading2","Heading3","Heading4","Heading5","Heading6","Reference","BlockQuote","Global","analyseHeadings","getLevel","currentLevel","currentHeading","indices","level","headingText","headingId","childrenHeadings","parentHeading","parent","grandParent","strlen","buffer","has","nextElement","nextPlain","hasSelfClose","matchElement","catchEndToken","eToken","nowiki","Menu","Navigation","headingsRef","handle","direction","scrollWidth","pos","scrollLeft","visibleWidth","maxPos","slideWidth","min","max","handle2","body","scrollTop","offsetTop","getElementsByClassName","offsetHeight"],"mappings":";QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;QACA;QACA;;;;;;;;;;;;;;;;;;;;;;;ACvJA;AACA;AAEA;AACA;AACA;AAEAA,gDAAQ,CAACC,MAAT,CAAgB,2DAAC,mEAAD,OAAhB,EAAyBC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAzB,E;;;;;;;ACPA;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNL;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAAC,QAAQ;AAAA;;AAAA,SAAIC,iEAAI,CAACD,QAAD,aAACA,QAAD,0CAACA,QAAQ,CAAEE,KAAX,6EAAC,gBAAiBC,QAAlB,0DAAC,sBAA4B,GAA5B,CAAD,CAAR;AAAA,CAA9B;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAAC,MAAM;AAAA,SACrB,wCACA,IAAIC,eAAJ,mBAAyBD,MAAzB;AAAiCE,UAAM,EAAE,MAAzC;AAAiDC,UAAM,EAAE;AAAzD,KAFqB;AAAA,CAAvB;;AAIA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,KAAK;AAAA,SAAK;AAClCC,UAAM,EAAE,OAD0B;AAElCC,QAAI,EAAE,UAF4B;AAGlCC,QAAI,EAAEH;AAH4B,GAAL;AAAA,CAA/B;;AAMA,IAAMI,WAAW,GAAG,SAAdA,WAAc,CAACJ,KAAD;AAAA,MAAQK,KAAR,uEAAgB,GAAhB;AAAA,SAAyB;AAC3CJ,UAAM,EAAE,OADmC;AAE3CC,QAAI,EAAE,WAFqC;AAG3CI,UAAM,EAAEN,KAHmC;AAI3CO,aAAS,EAAE,QAJgC;AAK3CC,YAAQ,EAAEH,KALiC;AAM3CI,UAAM,EAAE;AANmC,GAAzB;AAAA,CAApB;;AASA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAAV,KAAK;AAAA,SAAK;AAC9BC,UAAM,EAAE,OADsB;AAE9BC,QAAI,EAAE,UAFwB;AAG9BS,eAAW,EAAE,CAHiB;AAI9BC,WAAO,EAAE,IAJqB;AAK9BC,eAAW,EAAE,IALiB;AAM9BC,mBAAe,EAAE,OANa;AAO9BC,aAAS,EAAE,CAPmB;AAQ9BT,UAAM,EAAEN;AARsB,GAAL;AAAA,CAA3B;;AAWA;;;;;;;;;;0BAhCMX,a;0BAEAK,Q;0BAIAK,iB;0BAMAK,W;0BASAM,a;;;;;;;;;;;;;;;;ACvBN;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;ACNL;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;ACNL;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNL;;AAEA,IAAMM,QAAQ,GAAG,SAAXA,QAAW,CAACC,GAAD,EAAuB;AAAA,MAAjBC,OAAiB,uEAAP,EAAO;;AAAA,kBACNC,sDAAQ,CAAC,IAAD,CADF;AAAA;AAAA,MAC/B7B,QAD+B;AAAA,MACrB8B,WADqB;;AAAA,mBAEZD,sDAAQ,CAAC,IAAD,CAFI;AAAA;AAAA,MAE/BE,KAF+B;AAAA,MAExBC,QAFwB;;AAAA,mBAGJH,sDAAQ,CAAC,KAAD,CAHJ;AAAA;AAAA,MAG/BI,SAH+B;AAAA,MAGpBC,YAHoB;;AAKtCC,yDAAS,CAAC,YAAM;AACd,QAAMC,SAAS;AAAA,qLAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAChBF,4BAAY,CAAC,IAAD,CAAZ;AADgB;AAAA;AAAA,uBAGIG,KAAK,CAACV,GAAD,EAAMC,OAAN,CAHT;;AAAA;AAGRU,mBAHQ;AAAA;AAAA,uBAIKA,GAAG,CAACC,IAAJ,EAJL;;AAAA;AAIRA,oBAJQ;AAKdT,2BAAW,CAACS,IAAD,CAAX;AACAL,4BAAY,CAAC,KAAD,CAAZ;AANc;AAAA;;AAAA;AAAA;AAAA;AAQdF,wBAAQ,aAAR;;AARc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAATI,SAAS;AAAA;AAAA;AAAA,OAAf;;AAWAA,aAAS;AACV,GAbQ,EAaN,EAbM,CAAT;AAeA,SAAO;AAAEpC,YAAQ,EAARA,QAAF;AAAY+B,SAAK,EAALA,KAAZ;AAAmBE,aAAS,EAATA;AAAnB,GAAP;AACD,CArBD;;cAAMP,Q;;eAuBSA,Q;AAAA;;;;;;;;;;0BAvBTA,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFN;AACA;AAOA;;AAEA,IAAMc,cAAc,GAAG,SAAjBA,cAAiB,CAAA9B,KAAK,EAAI;AAAA,kBACQmB,sDAAQ,CAAC,IAAD,CADhB;AAAA;AAAA,MACvBY,WADuB;AAAA,MACVC,cADU;;AAE9B,MAAMC,kBAAkB,GAAGjB,oEAAQ,CAACtB,qEAAQ,CAACK,8EAAiB,CAACC,KAAD,CAAlB,CAAT,CAAnC;AACAyB,yDAAS,CAAC,YAAM;AACdO,kBAAc,CAAC3C,0EAAa,CAAC4C,kBAAkB,CAAC3C,QAApB,CAAd,CAAd;AACD,GAFQ,EAEN,CAAC2C,kBAAkB,CAAC3C,QAApB,CAFM,CAAT;AAGA,SAAOyC,WAAP;AACD,CAPD;;cAAMD,c;UAEuBd,4D;;;AAO7B,IAAMkB,SAAS,GAAG,SAAZA,SAAY,CAAAlC,KAAK,EAAI;AAAA,mBACGmB,sDAAQ,CAAC,IAAD,CADX;AAAA;AAAA,MAClBgB,MADkB;AAAA,MACVC,SADU;;AAEzB,MAAMC,UAAU,GAAGrB,oEAAQ,CAACtB,qEAAQ,CAACU,wEAAW,CAACJ,KAAD,CAAZ,CAAT,CAA3B;AACAyB,yDAAS,CAAC,YAAM;AAAA;;AACd,QAAIa,IAAI,2BAAGD,UAAU,CAAC/C,QAAd,kFAAG,qBAAqBiD,KAAxB,0DAAG,sBAA4BC,KAAvC;AAAA,QACEZ,GAAG,GAAG,EADR,CADc,CAGd;;AACA,SAAK,IAAMa,GAAX,IAAkBH,IAAlB,EAAwB;AAAA;;AAAA,8CACOA,IAAI,CAACG,GAAD,CADX,qEACO,UAAWC,SADlB,wDACO,oBAAuB,CAAvB,CADP;AAAA,UAChBzB,GADgB,wBAChBA,GADgB;AAAA,UACX0B,KADW,wBACXA,KADW;AAAA,UACJC,MADI,wBACJA,MADI;;AAEtBhB,SAAG,CAACU,IAAI,CAACG,GAAD,CAAJ,CAAUzC,KAAX,CAAH,GAAuB;AAAEiB,WAAG,EAAHA,GAAF;AAAO0B,aAAK,EAALA,KAAP;AAAcC,cAAM,EAANA;AAAd,OAAvB;AACD;;AACDR,aAAS,CAACR,GAAD,CAAT;AACD,GATQ,EASN,CAACS,UAAU,CAAC/C,QAAZ,CATM,CAAT;AAUA,SAAO6C,MAAP;AACD,CAdD;;cAAMD,S;UAEelB,4D;;;AAcrB,IAAM6B,UAAU,GAAG,SAAbA,UAAa,CAAC7C,KAAD,EAAQ8C,IAAR,EAAiB;AAAA,mBACJ3B,sDAAQ,CAAC,IAAD,CADJ;AAAA;AAAA,MAC3B4B,OAD2B;AAAA,MAClBC,UADkB;;AAElC,MAAMC,YAAY,GAAGjC,oEAAQ,CAACtB,qEAAQ,CAACgB,0EAAa,CAACV,KAAD,CAAd,CAAT,EAAiC;AAAE8C,QAAI,EAAJA;AAAF,GAAjC,CAA7B;AACArB,yDAAS,CAAC,YAAM;AAAA;;AACd,QAAIe,KAAK,4BAAGS,YAAY,CAAC3D,QAAhB,oFAAG,sBAAuBiD,KAA1B,2DAAG,uBAA8BC,KAA1C;;AACA,QAAIA,KAAJ,EAAW;AACT,UAAIU,OAAO,GAAG,IAAd;;AACA,WAAK,IAAMT,GAAX,IAAkBD,KAAlB,EAAyB;AAAA;;AACvBU,eAAO,iBAAGV,KAAK,CAACC,GAAD,CAAR,+CAAG,WAAYS,OAAtB;AACD;;AACDF,gBAAU,CAACE,OAAD,CAAV;AACD;AACF,GATQ,EASN,CAACD,YAAY,CAAC3D,QAAd,EAAwBwD,IAAxB,CATM,CAAT;AAUA,SAAOC,OAAP;AACD,CAdD;;cAAMF,U;UAEiB7B,4D;;;AAcvB;;;;;;;;;;0BAzCMc,c;0BASAI,S;0BAgBAW,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCN;AACA;AACA;AACA;AACA;AACA;CAGA;AAEA;AACA;;AAEO,IAAMM,aAAa,GAAGC,4CAAK,CAACC,aAAN,CAAoB,IAApB,CAAtB;AAEP,IAAM/C,MAAM,GAAG,CACb;AACA,eAFa,EAGb,4BAHa,EAIb,mBAJa,EAKb,WALa,EAMb,aANa,CAAf;AASA,IAAMN,KAAK,GAAGM,MAAM,CAACgD,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBlD,MAAM,CAACmD,MAAlC,CAAD,CAApB;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,MAAM3B,WAAW,GAAGD,gFAAc,CAAC9B,KAAD,CAAlC;AACA,MAAMmC,MAAM,GAAGD,2EAAS,CAAClC,KAAD,CAAxB,CAFoB,CAIpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SACE,2DAAC,aAAD,CAAe,QAAf;AAAwB,SAAK,EAAE;AAAEmC,YAAM,EAANA;AAAF;AAA/B,KACE,2DAAC,8CAAD,QACE,2DAAC,qDAAD,OADF,EAEE,2DAAC,oEAAD;AAAe,SAAK,EAAC,SAArB;AAA+B,kBAAc,EAAC;AAA9C,KACE;AAAK,aAAS,EAAC;AAAf,KAEE;AAAK,aAAS,EAAC;AAAf,KACE;AAAK,aAAS,EAAC;AAAf,KAA8BnC,KAAK,CAAC2D,OAAN,CAAc,IAAd,EAAoB,GAApB,CAA9B,CADF,EAEE;AAAK,aAAS,EAAC;AAAf,6CAFF,EAKE,2DAAC,wDAAD;AAAS,WAAO,EAAE5B,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAE6B;AAA/B,IALF,CAFF,CADF,CAFF,EAeE,2DAAC,2DAAD;AAAY,YAAQ,EAAE7B,WAAF,aAAEA,WAAF,uBAAEA,WAAW,CAAE8B;AAAnC,IAfF,CADF,CADF;AAqBD,CAtCD;;cAAMH,O;UACgB5B,wE,EACLI,mE;;;eAsCFwB,O;AAAA;;;;;;;;;;0BArDFP,a;0BAEP7C,M;0BASAN,K;0BAEA0D,O;;;;;;;;;;;;;;;;;AC1BN;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;;;;;;ACNL;AACA;;AACA,IAAMI,GAAG,GAAG,SAANA,GAAM,GAAM;AAChB,SAAO,2DAAC,wDAAD,OAAP;AACD,CAFD;;eAIeA,G;AAAA;;;;;;;;;;0BAJTA,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFN;AACA;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,OAAyB;AAAA,MAAtBC,OAAsB,QAAtBA,OAAsB;AAAA,MAAb7B,MAAa,QAAbA,MAAa;AACvC,MAAI,CAAC6B,OAAL,EAAc,OAAO,YAAP;AAEd,SACE,2DAAC,8CAAD,QACGA,OAAO,CAACC,GAAR,CAAY,UAACC,OAAD,EAAUC,KAAV;AAAA,WACX,2DAAC,yDAAD;AAAS,SAAG,EAAEA,KAAd;AAAqB,WAAK,EAAED,OAA5B;AAAqC,YAAM,EAAE/B;AAA7C,MADW;AAAA,GAAZ,CADH,CADF;AAOD,CAVD;;eAYe4B,O;AAAA;;;;;;;;;;0BAZTA,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHN;AACA;CAEA;;AAEO,IAAMK,IAAI,GAAG,SAAPA,IAAO,OAAc;AAAA,MAAXC,IAAW,QAAXA,IAAW;;AAAA,kBACAlD,sDAAQ,CAAC,EAAD,CADR;AAAA;AAAA,MAC3BmD,SAD2B;AAAA,MAChBC,YADgB;;AAEhC9C,yDAAS,CAAC,YAAM;AACd,QAAI+C,UAAU,GAAGH,IAAI,CAACI,KAAL,CAAW,MAAX,CAAjB;AAAA,QACE7C,GAAG,GAAG,EADR;;AAEA,SAAK,IAAI8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,UAAU,CAACf,MAA/B,EAAuCiB,CAAC,EAAxC,EAA4C;AAC1C9C,SAAG,CAAC+C,IAAJ,CAAS;AAAM,WAAG,EAAE,CAACD,CAAD,GAAK;AAAhB,SAAoBF,UAAU,CAACE,CAAD,CAA9B,CAAT;;AACA,UAAIA,CAAC,GAAGF,UAAU,CAACf,MAAX,GAAoB,CAA5B,EAA+B;AAC7B7B,WAAG,CAAC+C,IAAJ,CAAS;AAAI,aAAG,EAAED;AAAT,UAAT;AACD;AACF;;AACDH,gBAAY,CAAC3C,GAAD,CAAZ;AACD,GAVQ,EAUN,EAVM,CAAT;AAWA,SAAO,2DAAC,8CAAD,QAAW0C,SAAX,CAAP;AACD,CAdM;;cAAMF,I;;AAgBb,IAAMQ,OAAO,GAAG,SAAVA,OAAU,QAA6B;AAAA,MAA1BC,SAA0B,SAA1BA,SAA0B;AAAA,MAAfC,EAAe,SAAfA,EAAe;AAAA,MAAXT,IAAW,SAAXA,IAAW;AAC3C,MAAMU,OAAO,GAAG3B,4CAAK,CAAC4B,MAAN,EAAhB;;AAEA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AAChC;AACA,QAAIC,EAAE,GAAGH,OAAO,CAACI,OAAjB,CAFgC,CAGhC;;AAEA,QAAIC,IAAI,GAAGF,EAAE,CAACG,qBAAH,EAAX;AAEA,QAAIzD,GAAG,GACLwD,IAAI,CAACE,GAAL,IAAY,CAAZ,IACAF,IAAI,CAACG,IAAL,IAAa,CADb,IAEAH,IAAI,CAACI,MAAL,KACGC,MAAM,CAACC,WAAP,IAAsBvG,QAAQ,CAACwG,eAAT,CAAyBC,YADlD,CAFA,IAIAR,IAAI,CAACS,KAAL,KAAeJ,MAAM,CAACK,UAAP,IAAqB3G,QAAQ,CAACwG,eAAT,CAAyBI,WAA7D,CALF;;AAMA,QAAInE,GAAJ,EAAS;AACPoE,aAAO,CAACC,GAAR,CAAY5B,IAAZ;AACD;AACF,GAhBD;;AAkBA5C,yDAAS,CAAC,YAAM;AACdgE,UAAM,CAACS,gBAAP,CAAwB,QAAxB,EAAkCjB,mBAAlC;AACA,WAAO;AAAA,aAAMQ,MAAM,CAACU,mBAAP,CAA2B,QAA3B,EAAqClB,mBAArC,CAAN;AAAA,KAAP;AACD,GAHQ,EAGN,EAHM,CAAT;AAKA,SACE;AAAK,OAAG,EAAEF,OAAV;AAAmB,aAAS,EAAEF,SAA9B;AAAyC,MAAE,EAAEC;AAA7C,KACGT,IADH,CADF;AAKD,CA/BD;;cAAMO,O;;AAiCN,IAAMwB,QAAQ,GAAG,SAAXA,QAAW,QAA0B;AAAA,MAAvBnF,GAAuB,SAAvBA,GAAuB;AAAA,MAAlBoF,WAAkB,SAAlBA,WAAkB;AACzC,SACE,2DAAC,wDAAD;AAAS,OAAG,EAAEpF;AAAd,KACE;AAAG,QAAI,EAAE,mCAAmCA;AAA5C,KACGoF,WAAW,CAACpC,GAAZ,CAAgB,UAACqC,CAAD,EAAI5B,CAAJ,EAAU;AACzB,WAAO,2DAAC,OAAD;AAAS,SAAG,EAAEA,CAAd;AAAiB,WAAK,EAAE4B;AAAxB,MAAP;AACD,GAFA,CADH,CADF,CADF;AASD,CAVD;;AAYO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,QAAe;AAAA,MAAZC,KAAY,SAAZA,KAAY;AACrC,MAAIA,KAAK,CAACC,IAAN,IAAc,KAAd,IAAuBD,KAAK,CAACC,IAAN,IAAc,SAAzC,EAAoD,OAAO,EAAP;;AAEpD,MAAIC,KAAK,CAACC,OAAN,CAAcH,KAAK,CAAC5C,QAApB,CAAJ,EAAmC;AACjC,WACE,2DAAC,8CAAD,QACG4C,KAAK,CAAC5C,QAAN,CAAeK,GAAf,CAAmB,UAACqC,CAAD,EAAI5B,CAAJ;AAAA,aAClB,2DAAC,OAAD;AAAS,WAAG,EAAEA,CAAd;AAAiB,aAAK,EAAE4B;AAAxB,QADkB;AAAA,KAAnB,CADH,CADF;AAOD;;AAXoC,MAa/BM,SAb+B,GAajBJ,KAbiB,CAa/BI,SAb+B,EAcrC;;AACA,MAAIJ,KAAK,CAACC,IAAN,IAAc,gBAAlB,EAAoC;AAClC,WACE;AAAK,eAAS,EAAC;AAAf,OACGD,KAAK,CAACrE,MAAN,IACCqE,KAAK,CAACrE,MAAN,CAAa8B,GAAb,CAAiB,UAACqC,CAAD,EAAI5B,CAAJ,EAAU;AACzB,aAAO,2DAAC,OAAD;AAAS,WAAG,EAAEA,CAAd;AAAiB,aAAK,EAAE4B;AAAxB,QAAP;AACD,KAFD,CAFJ,CADF;AAQD;;AACD,MAAIE,KAAK,CAACC,IAAN,IAAc,MAAlB,EACE,OACE,2DAAC,8CAAD,QACE;AAAG,aAAS,EAAC,WAAb;AAAyB,QAAI,EAAEG,SAAS,CAAC3F;AAAzC,iBACO2F,SAAS,CAAC5G,KADjB,QADF,EAIG,IAJH,EAKGwG,KAAK,CAACK,OAAN,IAAiB,KAAjB,IAA0BD,SAAS,CAACE,SAApC,IACC,mFAAUF,SAAS,CAACE,SAApB,QANJ,EAQGN,KAAK,CAACK,OAAN,IAAiB,KAAjB,IAA0BD,SAAS,CAACG,UAApC,IACC,6FAAoBH,SAAS,CAACG,UAA9B,QATJ,CADF;AAeF,SAAO,WAAWC,IAAI,CAACC,SAAL,CAAeT,KAAf,CAAX,GAAmC,KAA1C;AACD,CA1CM;AA4CA,IAAMU,OAAO,GAAG,SAAVA,OAAU,QAAe;AAAA,MAAZV,KAAY,SAAZA,KAAY;AAAA,MAC9BW,WAD8B,GACJX,KADI,CAC9BW,WAD8B;AAAA,MACjBvD,QADiB,GACJ4C,KADI,CACjB5C,QADiB;AAGpC,MAAIuD,WAAW,IAAI,SAAnB,EAA8B,OAAO,EAAP;;AAE9B,MAAIA,WAAW,IAAI,cAAnB,EAAmC;AACjC,WACE;AAAG,UAAI,EAAE,mCAAmCX,KAAK,CAACvF;AAAlD,OACGuF,KAAK,CAACH,WADT,CADF;AAKD;;AAED,MAAIc,WAAW,IAAI,OAAnB,EAA4B;AAC1B,WAAO,sEAAP;AACD;;AAED,MAAIA,WAAW,IAAI,MAAnB,EAA2B;AACzB,WAAO,2DAAC,IAAD;AAAM,UAAI,EAAEX,KAAK,CAACnC;AAAlB,MAAP;AACD;;AAED,MAAI8C,WAAW,IAAI,UAAnB,EAA+B;AAC7B,WAAO,2DAAC,QAAD,EAAc;AAAEX,WAAK,EAALA;AAAF,KAAd,CAAP;AACD;;AAED,MAAIY,cAAJ;;AACA,MAAIV,KAAK,CAACC,OAAN,CAAc/C,QAAd,CAAJ,EAA6B;AAC3BwD,kBAAc,GAAGxD,QAAQ,CAACK,GAAT,CAAa,UAACqC,CAAD,EAAI5B,CAAJ;AAAA,aAAU,2DAAC,OAAD;AAAS,WAAG,EAAEA,CAAd;AAAiB,aAAK,EAAE4B;AAAxB,QAAV;AAAA,KAAb,CAAjB;AACD;;AAED,MAAIa,WAAW,IAAI,MAAnB,EAA2B;AACzB,WAAO;AAAM,eAAS,EAAC;AAAhB,OAA6BC,cAA7B,CAAP;AACD;;AAED,MAAID,WAAW,IAAI,QAAnB,EAA6B;AAC3B,WAAO;AAAM,eAAS,EAAC;AAAhB,OAA+BC,cAA/B,CAAP;AACD;;AAED,MAAID,WAAW,IAAI,YAAnB,EAAiC;AAC/B,WAAO;AAAM,eAAS,EAAC;AAAhB,OAAyCC,cAAzC,CAAP;AACD;;AAED,MAAID,WAAW,IAAI,aAAnB,EAAkC;AAChC,WAAO,+EAAaC,cAAb,CAAP;AACD;;AAED,MAAID,WAAW,CAACE,KAAZ,CAAkB,CAAlB,EAAqB,CAAC,CAAtB,KAA4B,SAAhC,EAA2C;AACzC,WAAO,2DAAC,OAAD,EAAab,KAAb,CAAP;AACD;;AAED,MAAIW,WAAW,IAAI,SAAnB,EAA8B;AAC5B,WACE;AAAK,eAAS,EAAC;AAAf,OACGX,KAAK,CAACrE,MAAN,CAAa8B,GAAb,CAAiB,UAACqC,CAAD,EAAI5B,CAAJ,EAAU;AAC1B,aAAO,2DAAC,OAAD;AAAS,WAAG,EAAEA,CAAd;AAAiB,aAAK,EAAE4B;AAAxB,QAAP;AACD,KAFA,CADH,CADF;AAOD;;AAED,MAAIa,WAAW,IAAI,MAAnB,EAA2B;AACzB,QAAIV,IAAI,GAAGD,KAAK,CAACC,IAAjB;;AACA,QAAIA,IAAI,IAAI,UAAZ,EAAwB;AACtB,aAAO,2DAAC,QAAD;AAAU,WAAG,EAAED,KAAK,CAACvF,GAArB;AAA0B,mBAAW,EAAEuF,KAAK,CAACH;AAA7C,QAAP;AACD;;AACD,QAAII,IAAI,IAAI,OAAZ,EAAqB;AACnB,UAAMa,WAAW,GAAGlE,4CAAK,CAACmE,UAAN,CAAiBpE,8DAAjB,CAApB;;AAEA,UAAIqD,KAAK,IAAIA,KAAK,CAACvF,GAAf,IAAsBqG,WAAtB,IAAqCA,WAAW,CAACnF,MAAZ,CAAmBqE,KAAK,CAACvF,GAAzB,CAAzC,EAAwE;AACtE,YAAIuG,MAAK,GACPhB,KAAK,CAACtF,OAAN,IAAiBsF,KAAK,CAACtF,OAAN,CAAcuG,OAAd,CAAsB,MAAtB,IAAgC,CAAC,CAAlD,GACI,SADJ,GAEI,UAHN;;AAIA,eACE,2DAAC,8CAAD,QACE;AAAK,mBAAS,gCAAyBD,MAAzB;AAAd,WACE;AACE,YAAE,EAAEhB,KAAK,CAACvF,GADZ;AAEE,mBAAS,EAAC,0BAFZ;AAGE,sBAAUqG,WAAW,CAACnF,MAAZ,CAAmBqE,KAAK,CAACvF,GAAzB,EAA8BA;AAH1C,UADF,EAME;AAAK,mBAAS,EAAC;AAAf,WACGuF,KAAK,CAACkB,OAAN,GACGlB,KAAK,CAACkB,OAAN,CAAczD,GAAd,CAAkB,UAACqC,CAAD,EAAI5B,CAAJ;AAAA,iBAAU,2DAAC,OAAD;AAAS,eAAG,EAAEA,CAAd;AAAiB,iBAAK,EAAE4B;AAAxB,YAAV;AAAA,SAAlB,CADH,GAEG,EAHN,CANF,CADF,CADF;AAgBD;AACF;AACF,GA/BD,MA+BO,IAAIa,WAAW,IAAI,WAAnB,EAAgC;AACrC,QACEX,KAAK,CAAC5C,QAAN,IACA4C,KAAK,CAAC5C,QAAN,CAAeH,MADf,IAEA+C,KAAK,CAAC5C,QAAN,CAAe,CAAf,EAAkBgD,SAFlB,IAGAJ,KAAK,CAAC5C,QAAN,CAAe,CAAf,EAAkBgD,SAAlB,CAA4B3F,GAJ9B,EAKE;AACA,aACE,wEACE;AAAG,YAAI,EAAEuF,KAAK,CAAC5C,QAAN,CAAe,CAAf,EAAkBgD,SAAlB,CAA4B3F;AAArC,SAA2CuF,KAAK,CAACmB,cAAjD,CADF,CADF;AAKD;;AACD,WACE,wEACE;AAAG,UAAI,EAAEnB;AAAT,OAAiBA,KAAK,CAACmB,cAAvB,CADF,CADF;AAKD;;AACD,SAAOX,IAAI,CAACC,SAAL,CAAeT,KAAf,CAAP;AACD,CA/GM;;cAAMU,O;;;;;;;;;;;0BAzGA9C,I;0BAgBPQ,O;0BAiCAwB,Q;0BAYOG,Q;0BA4CAW,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9Gb;AACA;AACA;AACA;;AAEA,IAAMU,cAAc,GAAG,SAAjBA,cAAiB,CAAC/F,IAAD,EAAyB;AAAA;;AAAA,MAAlBgG,OAAkB,uEAAR,GAAQ;AAC9C,MAAI7D,OAAO,kBAAGnC,IAAI,CAACU,KAAR,gDAAG,YAAYC,KAA1B;AAAA,MACEU,OAAO,GAAG,IADZ;AAAA,MAEElD,KAAK,mBAAG6B,IAAI,CAACU,KAAR,0EAAG,aAAYuF,UAAf,oFAAG,sBAAyB,CAAzB,CAAH,2DAAG,uBAA6BC,EAFvC;;AAGA,OAAK,IAAMtF,GAAX,IAAkBuB,OAAlB;AAAA;;AAA2Bd,WAAO,mBAAGc,OAAO,CAACvB,GAAD,CAAV,iDAAG,aAAcS,OAAxB;AAA3B;;AACAA,SAAO,GAAGA,OAAO,CAAC8E,MAAR,CAAe,CAAf,EAAkBH,OAAlB,IAA6B,KAAvC;AACA,SAAO;AAAE3E,WAAO,EAAPA,OAAF;AAAWlD,SAAK,EAALA;AAAX,GAAP;AACD,CAPD;;AASA,IAAMiI,OAAO,GAAG,SAAVA,OAAU,CAAAzB,KAAK,EAAI;AAAA,MACfvF,GADe,GACGuF,KADH,CACfvF,GADe;AAAA,MACV2C,QADU,GACG4C,KADH,CACV5C,QADU;;AAAA,kBAECzC,sDAAQ,CAAC,KAAD,CAFT;AAAA;AAAA,MAEhB2B,IAFgB;AAAA,MAEVoF,OAFU;;AAAA,mBAGO/G,sDAAQ,CAAC,IAAD,CAHf;AAAA;AAAA,MAGhB4B,OAHgB;AAAA,MAGPC,UAHO;;AAAA,mBAIG7B,sDAAQ,CAAC,IAAD,CAJX;AAAA;AAAA,MAIhBnB,KAJgB;AAAA,MAITmI,QAJS;;AAKvB,MAAMC,aAAa,GAAG,SAAhBA,aAAgB;AAAA,WAAMF,OAAO,CAAC,IAAD,CAAb;AAAA,GAAtB;;AACA,MAAMG,cAAc,GAAG,SAAjBA,cAAiB;AAAA,WAAMH,OAAO,CAAC,KAAD,CAAb;AAAA,GAAvB;;AAEA9E,8CAAK,CAAC3B,SAAN,CAAgB,YAAM;AACpB,QAAIqB,IAAI,IAAI,CAACC,OAAb,EAAsB;AACpBpB,WAAK,CAACjC,qEAAQ,CAACgB,0EAAa,CAACO,GAAD,CAAd,CAAT,CAAL,CACGqH,IADH,CACQ,UAAAhJ,QAAQ;AAAA,eAAIA,QAAQ,CAACuC,IAAT,EAAJ;AAAA,OADhB,EAEGyG,IAFH,CAEQ,UAAAzG,IAAI,EAAI;AAAA,8BACa+F,cAAc,CAAC/F,IAAD,CAD3B;AAAA,YACNqB,OADM,mBACNA,OADM;AAAA,YACGlD,KADH,mBACGA,KADH;;AAEZgD,kBAAU,CAACE,OAAD,CAAV;AACAiF,gBAAQ,CAACnI,KAAK,IAAIiB,GAAV,CAAR;AACD,OANH,WAOS,UAAAI,KAAK;AAAA,eAAI2E,OAAO,CAAC3E,KAAR,CAAcA,KAAd,CAAJ;AAAA,OAPd;AAQD;AACF,GAXD,EAWG,CAACyB,IAAD,CAXH;AAaA,SACE;AACE,aAAS,EAAC,SADZ;AAEE,eAAW,EAAEsF,aAFf;AAGE,gBAAY,EAAEC;AAHhB,KAKGvF,IAAI,IACH;AAAK,aAAS,EAAC;AAAf,KACG9C,KAAK,GACJ;AACE,SAAK,EAAE;AAAEuI,eAAS,EAAE,CAAb;AAAgBC,kBAAY,EAAE;AAA9B,KADT;AAEE,aAAS,EAAC;AAFZ,KAIGxI,KAJH,CADI,GAQJ,2DAAC,6DAAD;AAAU,UAAM,EAAE,GAAlB;AAAuB,YAAQ,EAAE;AAAjC,IATJ,EAWG+C,OAXH,CANJ,EAqBGK,4CAAK,CAACqF,QAAN,CAAeC,OAAf,CAAuB9E,QAAvB,CArBH,CADF;AAyBD,CA9CD;;cAAMqE,O;;eAgDSA,O;AAAA;;;;;;;;;;0BAzDTL,c;0BASAK,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CCbN;AACA;;AACA,IAAMU,KAAK,GAAGC,oDAAO,GAAGC,IAAV,EAAd;AACA,IAAMC,UAAU,GAAGF,oDAAO,GACvBC,IADgB,GAEhB5E,GAFgB,CAEZ,UAAA8E,IAAI;AAAA,SAAIA,IAAI,CAACC,IAAT;AAAA,CAFQ,CAAnB;;AAIA,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,CAAD,EAAIC,CAAJ,EAAOzE,CAAP;AAAA,SAAawE,CAAC,CAACxE,CAAD,CAAD,IAAQyE,CAAC,CAAC,CAAD,CAAT,IAAgBD,CAAC,CAAClB,MAAF,CAAStD,CAAT,EAAYyE,CAAC,CAAC1F,MAAd,KAAyB0F,CAAtD;AAAA,CAAd;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,MAAM;AAAA,SAC5BA,MAAM,CAACC,MAAP,CAAc,CAAd,EAAiBC,WAAjB,KAAiCF,MAAM,CAAChC,KAAP,CAAa,CAAb,CADL;AAAA,CAA9B;;AAGA,IAAMmC,UAAU,GAAG,SAAbA,UAAa,CAAAH,MAAM;AAAA,SACvBA,MAAM,CAACC,MAAP,CAAc,CAAd,EAAiBC,WAAjB,KAAiCF,MAAM,CAAChC,KAAP,CAAa,CAAb,EAAgBoC,WAAhB,EADV;AAAA,CAAzB;;AAGA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAAC,GAAG;AAAA,SACnBA,GAAG,IAAI,OAAOA,GAAG,CAAC,CAAD,CAAjB,IAAwB,OAAOA,GAAG,CAACA,GAAG,CAAClG,MAAJ,GAAa,CAAd,CAAlC,GACIkG,GAAG,CAACtC,KAAJ,CAAU,CAAV,EAAasC,GAAG,CAAClG,MAAJ,GAAa,CAA1B,CADJ,GAEIkG,GAHe;AAAA,CAArB;;AAKA,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAAAC,GAAG,EAAI;AACnB,MAAIjI,GAAG,GAAG,EAAV;;AACA,OAAK,IAAMa,GAAX,IAAkBoH,GAAlB,EAAuB;AACrB,QAAIC,KAAK,GAAGD,GAAG,CAACpH,GAAD,CAAf;AACA,QACEqH,KAAK,KAAK,IAAV,IACAA,KAAK,KAAKC,SADV,IAECrD,KAAK,CAACC,OAAN,CAAcmD,KAAd,KAAwBA,KAAK,CAACrG,MAAN,KAAiB,CAF1C,IAGCuG,MAAM,CAACC,IAAP,CAAYH,KAAZ,EAAmBrG,MAAnB,KAA8B,CAA9B,IAAmCqG,KAAK,CAACI,WAAN,KAAsBF,MAJ5D,EAME;AACFpI,OAAG,CAACa,GAAD,CAAH,GAAWqH,KAAX;AACD;;AACD,SAAOlI,GAAP;AACD,CAdD;;AAgBA,IAAMuI,UAAU,GAAG,SAAbA,UAAa,CAAAC,KAAK,EAAI;AAC1B,MAAIC,MAAM,4BAAG,sHAAH;AAAA;AAAA;AAAA,IAAV;;AAD0B,4BAGIA,MAAM,CAACC,IAAP,CAAYF,KAAZ,EAAmBG,MAHvB;AAAA,MAGpB1D,OAHoB,uBAGpBA,OAHoB;AAAA,MAGX2D,UAHW,uBAGXA,UAHW;AAAA,MAIxB5D,SAJwB,GAIZ,EAJY;;AAAA,6CAMP4D,UAAU,CAAC/F,KAAX,CAAiB,GAAjB,CANO;AAAA;;AAAA;AAM1B,wDAA0C;AAAA,UAA/BgG,IAA+B;AACxC,UAAIC,UAAU,GAAGD,IAAI,CAAChD,OAAL,CAAa,GAAb,CAAjB;AADwC,iBAErB,CACjBgD,IAAI,CAACpD,KAAL,CAAW,CAAX,EAAcqD,UAAd,CADiB,EAEjBD,IAAI,CAACpD,KAAL,CAAWqD,UAAU,GAAG,CAAxB,EAA2BC,IAA3B,EAFiB,CAFqB;AAAA,UAEnClI,GAFmC;AAAA,UAE9BqH,KAF8B;AAMxClD,eAAS,CAACnE,GAAD,CAAT,GAAiBqH,KAAjB;AACD;AAbyB;AAAA;AAAA;AAAA;AAAA;;AAc1B,SAAO;AAAErD,QAAI,EAAE,MAAR;AAAgBI,WAAO,EAAPA,OAAhB;AAAyBD,aAAS,EAATA;AAAzB,GAAP;AACD,CAfD;;AAiBA,IAAMgE,aAAa,GAAG,SAAhBA,aAAgB,CAAAR,KAAK,EAAI;AAC7B,MAAMS,QAAQ,GAAG,SAAXA,QAAW,CAAAC,QAAQ,EAAI;AAC3B,QAAIlJ,GAAG,GAAG,IAAV;;AACA,QAAI;AAAA,kDACmBgH,oDAAO,GACzBmC,IADkB,CACbD,QADa,EAElBE,aAFkB,EADnB;AAAA;;AAAA;AACF,+DAEoB;AAAA,cAFTC,OAES;AAClB,cAAIC,UAAU,GAAGtC,oDAAO,GAAGuC,QAAV,CAAmBF,OAAnB,EAA2BG,MAA5C;AACA,cAAI,YAAYF,UAAhB,EAA4BtJ,GAAG,GAAGqJ,OAAN;AAC7B;AANC;AAAA;AAAA;AAAA;AAAA;AAOH,KAPD,CAOE,gBAAM;AACN,aAAO,IAAP;AACD;;AACD,WAAOrJ,GAAP;AACD,GAbD;;AAeA,MAAMyJ,MAAM,GAAG,SAATA,MAAS,CAAA1B,GAAG,EAAI;AACpB,QAAI,WAAW2B,IAAX,CAAgB3B,GAAhB,CAAJ,EAA0B,OAAOA,GAAP;AAC1B,QAAI4B,KAAK,GAAG5B,GAAG,CAACF,WAAJ,EAAZ;;AAFoB,gDAGDd,KAHC;AAAA;;AAAA;AAGpB,6DAA0B;AAAA,YAAfI,IAAe;AACxB,YACEA,IAAI,CAACC,IAAL,CAAUS,WAAV,MAA2B8B,KAA3B,IACAxC,IAAI,CAACyC,QAAL,CAAc/B,WAAd,MAA+B8B,KAD/B,IAEAxC,IAAI,CAAC0C,MAAL,CAAYhC,WAAZ,MAA6B8B,KAH/B,EAKE,OAAOxC,IAAI,CAACC,IAAZ;AACH;AAVmB;AAAA;AAAA;AAAA;AAAA;;AAWpB,WAAOW,GAAP;AACD,GAZD;;AAcA,MAAI+B,MAAM,GAAGtB,KAAK,CAAC/C,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB5C,KAAtB,mBAAV;AAAA,MACEkH,OAAO,GAAG,IADZ;AAAA,MAEEb,QAFF;AAAA,MAGEG,MAAM,GAAG,IAHX;AAAA,MAIEW,MAAM,GAAG,IAJX;AAMAF,QAAM,CAACG,KAAP;AAEAF,SAAO,GAAGD,MAAM,CAACG,KAAP,EAAV;AAEAf,UAAQ,GAAGO,MAAM,CAACK,MAAM,CAACG,KAAP,EAAD,CAAjB;;AAEA,MAAI,QAAQP,IAAR,CAAaR,QAAb,CAAJ,EAA4B;AAC1BA,YAAQ,GAAG,IAAX;AACAG,UAAM,GAAG,IAAT;AACAW,UAAM,GAAG,CAACD,OAAD,IAAY,IAAI,CAAhB,IAAqB,EAA9B;AACD,GAJD,MAIO,IAAI,QAAQL,IAAR,CAAaR,QAAb,CAAJ,EAA4B;AACjCA,YAAQ,GAAG,IAAX;AACAG,UAAM,GAAG,IAAT;AACAW,UAAM,GAAG,CAAC,CAACD,OAAD,GAAW,EAAZ,KAAmB,IAAI,CAAvB,CAAT;AACD,GAJM,MAIA;AACL,QAAID,MAAM,CAACjI,MAAP,IAAiBqF,UAAU,CAACrB,OAAX,CAAmBiE,MAAM,CAAC,CAAD,CAAzB,KAAiC,CAAC,CAAvD,EAA0D;AACxDT,YAAM,GAAGS,MAAM,CAACG,KAAP,EAAT;AACD;;AAED,QAAI,CAACZ,MAAL,EAAaA,MAAM,GAAGJ,QAAQ,CAACC,QAAD,CAAjB;;AACb,QAAIa,OAAO,IAAIV,MAAX,IAAqBH,QAAzB,EAAmC;AACjC,UAAI;AACFc,cAAM,GAAGhD,oDAAO,CAAC,CAAC+C,OAAF,CAAP,CACNZ,IADM,CACDD,QADC,EAEN/C,EAFM,CAEHkD,MAFG,CAAT;AAGD,OAJD,CAIE,iBAAM;AACN,eAAO;AACL9D,qBAAW,EAAE,MADR;AAEL9C,cAAI,YAAKsH,OAAL,cAAgBb,QAAhB;AAFC,SAAP;AAID;AACF;AACF;;AAEDc,QAAM,GAAGA,MAAM,GAAGA,MAAM,CAACE,OAAP,CAAe,CAAf,CAAH,GAAuB,IAAtC;;AACA,MAAIhB,QAAQ,IAAIG,MAAZ,IAAsBW,MAAM,KAAK,IAArC,EAA2C;AACzC,WAAO;AACLzE,iBAAW,EAAE,MADR;AAEL9C,UAAI,YAAKsH,OAAL,cAAgBb,QAAhB,eAA6Bc,MAA7B,cAAuCX,MAAvC;AAFC,KAAP;AAID;;AAED,SAAO;AACL9D,eAAW,EAAE,MADR;AAEL9C,QAAI,YAAKsH,OAAL,cAAgBb,QAAhB;AAFC,GAAP;AAID,CAlFD;;AAoFA,IAAMiB,eAAe,GAAG,SAAlBA,eAAkB,CAAA3B,KAAK,EAAI;AAC/B,MAAI4B,OAAJ;AAAA,MACEC,QADF;AAAA,MAEErI,QAFF;AAAA,MAGEsI,KAHF;AAAA,MAIEC,MAAM,GAAG/B,KAJX,CAD+B,CAO/B;;AACA,MAAMgC,MAAM,4BAAG,oCAAH;AAAA;AAAA,IAAZ;;AACA,MAAI,CAACF,KAAK,GAAGE,MAAM,CAAC9B,IAAP,CAAYF,KAAZ,CAAT,MAAiC,IAArC,EACE,MAAM,6BAA6BA,KAAnC;AAEF+B,QAAM,GAAGD,KAAK,CAAC3B,MAAN,CAAa4B,MAAtB,CAZ+B,CAc/B;;AACA,MAAME,OAAO,4BAAG,2KAAH;AAAA;AAAA;AAAA,IAAb;;AACA,MAAI,CAACH,KAAK,GAAGG,OAAO,CAAC/B,IAAR,CAAa6B,MAAb,CAAT,MAAmC,IAAvC,EAA6C;AAAA,wBACnBD,KAAK,CAAC3B,MADa;AACxC4B,UADwC,iBACxCA,MADwC;AAChCF,YADgC,iBAChCA,QADgC;AAE3CA,YAAQ,GAAGvC,SAAS,CAACuC,QAAD,CAApB;AACD,GAnB8B,CAqB/B;;;AACA,MAAMK,MAAM,4BAAG,uKAAH;AAAA;AAAA;AAAA,IAAZ;;AACA,MAAI,CAACJ,KAAK,GAAGI,MAAM,CAAChC,IAAP,CAAY6B,MAAZ,CAAT,MAAkC,IAAtC,EAA4C;AAAA,yBACnBD,KAAK,CAAC3B,MADa;AACvC4B,UADuC,kBACvCA,MADuC;AAC/BH,WAD+B,kBAC/BA,OAD+B;AAE1CA,WAAO,GAAGtC,SAAS,CAACsC,OAAD,CAAnB;AACD,GA1B8B,CA4B/B;;;AACA,MAAI,WAAW1B,IAAX,CAAgB6B,MAAhB,CAAJ,EAA6B;AAC3B,WAAO;AAAE1F,UAAI,EAAE,OAAR;AAAiBuF,aAAO,EAAPA,OAAjB;AAA0BC,cAAQ,EAARA;AAA1B,KAAP;AACD,GA/B8B,CAiC/B;;;AACA,MAAMM,UAAU,4BAAG,4BAAH;AAAA;AAAA,IAAhB;;AACA,MAAI,CAACL,KAAK,GAAGK,UAAU,CAACjC,IAAX,CAAgB6B,MAAhB,CAAT,MAAsC,IAA1C,EAAgD;AAC9C,UAAM,8BAA8BA,MAApC;AACD;;AAEDvI,UAAQ,GAAGrE,IAAI,CAAC2M,KAAK,CAAC3B,MAAN,CAAa3G,QAAd,CAAJ,CAA4BA,QAAvC;AACAoI,SAAO,GAAGtC,SAAS,CAACsC,OAAD,CAAnB;AACAC,UAAQ,GAAGvC,SAAS,CAACuC,QAAD,CAApB;AAEA,SAAO;AAAExF,QAAI,EAAE,UAAR;AAAoBuF,WAAO,EAAPA,OAApB;AAA6BC,YAAQ,EAARA,QAA7B;AAAuCrI,YAAQ,EAARA;AAAvC,GAAP;AACD,CA5CD;;AA8CA,IAAM4I,cAAc,GAAG,SAAjBA,cAAiB,CAAApC,KAAK,EAAI;AAC9B,MAAI8B,KAAJ;AAAA,MACEC,MADF;AAAA,MAEEM,OAFF;AAAA,MAGEC,MAHF;AAAA,MAIE7F,OAJF;AAAA,MAKEjD,QALF;AAAA,MAME6C,IAAI,GAAG,UANT,CAD8B,CAS9B;;AACA,MAAMkG,UAAU,4BAAG,+CAAH;AAAA;AAAA;AAAA,IAAhB;;AACA,MAAI,CAACT,KAAK,GAAGS,UAAU,CAACrC,IAAX,CAAgBF,KAAhB,CAAT,MAAqC,IAAzC,EAA+C,MAAM,gBAAN;AAXjB,uBAYP8B,KAAK,CAAC3B,MAZC;AAY3B1D,SAZ2B,kBAY3BA,OAZ2B;AAYlBsF,QAZkB,kBAYlBA,MAZkB;;AAc9B;AACA,MAAME,OAAO,4BAAG,mGAAH;AAAA;AAAA;AAAA,IAAb;;AACA,MAAI,CAACH,KAAK,GAAGG,OAAO,CAAC/B,IAAR,CAAa6B,MAAb,CAAT,MAAmC,IAAvC,EAA6C;AAAA,yBACpBD,KAAK,CAAC3B,MADc;AACxCkC,WADwC,kBACxCA,OADwC;AAC/BN,UAD+B,kBAC/BA,MAD+B;AAE5C,GAlB6B,CAoB9B;;;AACA,MAAMG,MAAM,4BAAG,qGAAH;AAAA;AAAA;AAAA,IAAZ;;AACA,MAAI,CAACJ,KAAK,GAAGI,MAAM,CAAChC,IAAP,CAAY6B,MAAZ,CAAT,MAAkC,IAAtC,EAA4C;AAAA,yBACpBD,KAAK,CAAC3B,MADc;AACvCmC,UADuC,kBACvCA,MADuC;AAC/BP,UAD+B,kBAC/BA,MAD+B;AAE3C,GAxB6B,CA0B9B;;;AACAvI,UAAQ,GAAGuI,MAAM,GAAG5M,IAAI,CAAC4M,MAAD,CAAJ,CAAavI,QAAhB,GAA2B,EAA5C,CA3B8B,CA6B9B;;AACA,SAAO;AAAE6C,QAAI,EAAJA,IAAF;AAAQI,WAAO,EAAPA,OAAR;AAAiB6F,UAAM,EAANA,MAAjB;AAAyBD,WAAO,EAAPA,OAAzB;AAAkC7I,YAAQ,EAARA;AAAlC,GAAP;AACD,CA/BD;;AAiCA,IAAMgJ,aAAa,GAAG,SAAhBA,aAAgB,CAAAxC,KAAK,EAAI;AAC7B,MAAMyC,SAAS,4BAAG,6HAAH;AAAA;AAAA;AAAA,IAAf;;AACA,MAAIX,KAAJ;AAAA,MACEY,IADF;AAAA,MAEE9I,OAFF;AAAA,MAGEwG,UAAU,GAAG,EAHf;AAIA,MAAI,CAAC0B,KAAK,GAAGW,SAAS,CAACvC,IAAV,CAAeF,KAAf,CAAT,MAAoC,IAAxC,EAA8C,MAAM,sBAAN;AANjB,uBAQR8B,KAAK,CAAC3B,MARE;AAQ1BuC,MAR0B,kBAQ1BA,IAR0B;AAQpB9I,SARoB,kBAQpBA,OARoB;;AAU7B,MAAM+I,MAAM,4BAAG,gKAAH;AAAA;AAAA;AAAA,IAAZ;;AAEA,SAAO,CAACb,KAAK,GAAGa,MAAM,CAACzC,IAAP,CAAYwC,IAAZ,CAAT,MAAgC,IAAvC,EAA6C;AAAA,yBACtBZ,KAAK,CAAC3B,MADgB;AAAA,QACrC9H,GADqC,kBACrCA,GADqC;AAAA,QAChCqH,KADgC,kBAChCA,KADgC;AAE3CU,cAAU,CAAC/H,GAAD,CAAV,GAAkBiH,SAAS,CAACI,KAAD,CAA3B;AACD;;AAED,MAAI3H,MAAM,GAAG,EAAb;;AAjB6B,8CAkBX6B,OAAO,CAACS,KAAR,CAAc,IAAd,CAlBW;AAAA;;AAAA;AAkB7B,2DAAuC;AAAA,UAA9BuI,KAA8B;AACrC,UAAI,SAAS1C,IAAT,CAAc0C,KAAd,CAAJ,EAA0B;AAC1BA,WAAK,GAAG,qBAAqB1C,IAArB,CAA0B0C,KAA1B,EAAiC,CAAjC,CAAR;AACA7K,YAAM,CAACwC,IAAP,CAAYpF,IAAI,aAAMyN,KAAN,QAAJ,CAAqBpJ,QAArB,CAA8B,CAA9B,CAAZ;AACD;AAtB4B;AAAA;AAAA;AAAA;AAAA;;AAuB7B,SAAO;AAAE4G,cAAU,EAAVA,UAAF;AAAcrI,UAAM,EAANA;AAAd,GAAP;AACD,CAxBD;;AA0BA,IAAM8K,aAAa,GAAG,SAAhBA,aAAgB,CAAA7C,KAAK,EAAI;AAC7B,MAAIxI,GAAG,GAAG,EAAV;AAAA,MACEuK,MAAM,GAAG/B,KADX;AAAA,MAEE3H,GAFF;AAAA,MAGEyK,SAHF;AAAA,MAIEC,WAJF;AAAA,MAKEjB,KALF;;AAOA,MAAMkB,KAAK,4BAAG,4KAAH;AAAA;AAAA;AAAA,IAAX;;AAEA,SAAOjB,MAAP,EAAe;AACb,QAAI,CAACD,KAAK,GAAGkB,KAAK,CAAC9C,IAAN,CAAW6B,MAAX,CAAT,MAAiC,IAArC,EACE,MAAM,2BAA2BA,MAAjC;AAFW,yBAGMD,KAAK,CAAC3B,MAHZ;AAGV9H,OAHU,kBAGVA,GAHU;AAGL0J,UAHK,kBAGLA,MAHK;;AAAA,iBAKgB3M,KAAK,CAAC2M,MAAD,EAAS,IAAT,EAAe,CAAf,EAAkBkB,QAAlB,CALrB;;AAAA;;AAKZH,aALY;AAKCC,eALD;AAMbhB,UAAM,GAAGA,MAAM,CAACnE,MAAP,CAAckF,SAAd,CAAT;AAEA,QAAIpD,KAAK,GAAGqD,WAAZ;AACAjB,SAAK,GAAG;AAAA;AAAA,OAAiC5B,IAAjC,CAAsCR,KAAtC,CAAR;AACA,QAAIoC,KAAK,KAAK,IAAd,EAAoB,qCAA8BpC,KAA9B;AACpBA,SAAK,GAAGoC,KAAK,CAAC3B,MAAN,CAAaT,KAArB;AACAlI,OAAG,CAACa,GAAD,CAAH,GAAWqH,KAAK,IAAI,GAAT,GAAe,EAAf,GAAoBA,KAA/B;AACD;;AAED,SAAOlI,GAAP;AACD,CA1BD;;AA4BA,IAAM0L,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAlD,KAAK,EAAI;AACnC,MAAMmD,iBAAiB,4BAAG,gHAAH;AAAA;AAAA,IAAvB;;AAEA,MAAIrB,KAAK,GAAGqB,iBAAiB,CAACjD,IAAlB,CAAuBF,KAAvB,CAAZ;AAAA,MACEI,UAAU,GAAG,EADf;AAAA,MAEErI,MAAM,GAAG,EAFX;AAIA,MAAI+J,KAAK,KAAK,IAAd,EAAoB,MAAM,+BAA+B9B,KAArC;AAPe,MAS7B+B,MAT6B,GASlBD,KAAK,CAAC3B,MATY,CAS7B4B,MAT6B;;AAWnC,MAAIqB,WAAW,4BAAG,gKAAH;AAAA;AAAA;AAAA,IAAf;;AAEA,MAAIC,KAAK,GAAGR,aAAa,CAACd,MAAD,CAAzB;;AAEA,kCAAkBnC,MAAM,CAACC,IAAP,CAAYwD,KAAZ,CAAlB,kCAAsC;AAAjC,QAAMhL,GAAG,mBAAT;AACH,QAAMqH,KAAK,GAAG2D,KAAK,CAAChL,GAAD,CAAnB;;AACA,QAAI,CAACyJ,KAAK,GAAGsB,WAAW,CAAClD,IAAZ,CAAiB7H,GAAjB,CAAT,MAAoC,IAAxC,EAA8C;AAC5C+H,gBAAU,CAAC/H,GAAD,CAAV,GAAkBqH,KAAlB;AACA;AACD;;AALmC,yBAORoC,KAAK,CAAC3B,MAPE;AAAA,QAO9BmD,QAP8B,kBAO9BA,QAP8B;AAAA,QAOpBC,OAPoB,kBAOpBA,OAPoB;AAQpCA,WAAO,GAAG,CAACA,OAAD,GAAW,CAArB;AACA,QAAIxL,MAAM,CAACwL,OAAD,CAAN,KAAoB5D,SAAxB,EAAmC5H,MAAM,CAACwC,IAAP,CAAY,EAAZ;;AACnC,QAAI,WAAW+I,QAAf,EAAyB;AACvBvL,YAAM,CAACwL,OAAD,CAAN,CAAgB1M,GAAhB,GAAsB,UAAU6I,KAAK,CAACa,IAAN,EAAhC;AACD,KAFD,MAEO,IAAI,aAAa+C,QAAjB,EAA2B;AAChCvL,YAAM,CAACwL,OAAD,CAAN,CAAgBjG,OAAhB,GAA0BnI,IAAI,CAACuK,KAAD,CAAJ,CAAYlG,QAAtC;AACD,KAFM,MAEAzB,MAAM,CAACwL,OAAD,CAAN,CAAgBD,QAAhB,IAA4B5D,KAA5B;AACR;;AAED3H,QAAM,GAAGA,MAAM,CAAC8B,GAAP,CAAW,UAAA+I,KAAK;AAAA,WAAK;AAC5B7F,iBAAW,EAAE,MADe;AAE5BV,UAAI,EAAE,OAFsB;AAG5BmH,aAAO,EAAE,MAHmB;AAI5B3M,SAAG,EAAE+L,KAAK,CAAC/L,GAJiB;AAK5BC,aAAO,EAAE,EALmB;AAM5BwG,aAAO,EAAEsF,KAAK,CAACtF,OAAN,IAAiB,CAAC;AAAEP,mBAAW,EAAE,MAAf;AAAuB9C,YAAI,EAAE;AAA7B,OAAD;AANE,KAAL;AAAA,GAAhB,CAAT;AASA,SAAO;AAAEoC,QAAI,EAAE,gBAAR;AAA0BtE,UAAM,EAANA,MAA1B;AAAkCqI,cAAU,EAAVA;AAAlC,GAAP;AACD,CA1CD;;AA4CA,IAAMqD,aAAa,GAAG,SAAhBA,aAAgB,CAAAzD,KAAK,EAAI;AAC7B,MAAM0D,MAAM,4BAAG,6HAAH;AAAA;AAAA;AAAA,IAAZ;;AACA,MAAI5B,KAAK,GAAG4B,MAAM,CAACxD,IAAP,CAAYF,KAAZ,CAAZ;AAAA,MACE2D,OADF;AAAA,MAEE5B,MAFF;AAAA,MAGE6B,QAAQ,GAAG,EAHb;AAIA,MAAI9B,KAAK,KAAK,IAAd,EAAoB,MAAM,yBAAyB9B,KAA/B;AANS,wBAQN8B,KAAK,CAAC3B,MARA;AAQ1BwD,SAR0B,mBAQ1BA,OAR0B;AAQjB5B,QARiB,mBAQjBA,MARiB;;AAAA,8CAUPA,MAAM,CAAC1H,KAVA;AAAA;;AAAA;AAU7B,2DAA0C;AAAA,UAA/BwJ,OAA+B;AACxC;AACA;AAEA,UAAIzD,UAAU,GAAGyC,aAAa,CAACgB,OAAD,CAA9B,CAJwC,CAMxC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAD,cAAQ,CAACrJ,IAAT,CAAc6F,UAAd;AACD;AA1B4B;AAAA;AAAA;AAAA;AAAA;;AA4B7B,SAAO;AAAE/D,QAAI,EAAE,SAAR;AAAmBsH,WAAO,EAAPA,OAAnB;AAA4BC,YAAQ,EAARA;AAA5B,GAAP;AACD,CA7BD;;AA+BA,IAAME,aAAa,GAAG,SAAhBA,aAAgB,CAAChK,OAAD,EAAUF,OAAV,EAAmBoG,KAAnB,EAA6B;AACjD,MAAIlG,OAAO,CAACiD,WAAR,IAAuB,WAA3B,EAAwC;AACtC,WAAO4E,eAAe,CAAC3B,KAAD,CAAtB;AACD;;AAED,MAAIlG,OAAO,CAACiD,WAAR,IAAuB,SAA3B,EAAsC,OAAOyF,aAAa,CAACxC,KAAD,CAApB;;AAEtC,MAAIlG,OAAO,CAACiD,WAAR,IAAuB,cAA3B,EAA2C;AACzC,QAAMgH,UAAU,4BAAG,6JAAH;AAAA;AAAA;AAAA,MAAhB;;AACA,QAAIjC,KAAJ,EAAWjL,GAAX,EAAgBoF,WAAhB;;AACA,QAAI,CAAC6F,KAAK,GAAGiC,UAAU,CAAC7D,IAAX,CAAgBF,KAAhB,CAAT,MAAqC,IAAzC,EAA+C;AAAA,4BACrB8B,KAAK,CAAC3B,MADe;AAC1CtJ,SAD0C,mBAC1CA,GAD0C;AACrCoF,iBADqC,mBACrCA,WADqC;AAE7C,aAAO;AAAEpF,WAAG,EAAHA,GAAF;AAAOoF,mBAAW,EAAXA;AAAP,OAAP;AACD,KAHD,MAGO;AACL,YAAM,4BAAN;AACD;AACF;;AAED,MAAInC,OAAO,CAACiD,WAAR,IAAuB,UAA3B,EAAuC;AACrC,QAAI,cAAcmE,IAAd,CAAmBlB,KAAnB,CAAJ,EAA+B;AAC7B,aAAOD,UAAU,CAACC,KAAD,CAAjB;AACD,KAFD,MAEO,IAAI,uCAAuCkB,IAAvC,CAA4ClB,KAA5C,CAAJ,EAAwD;AAC7D,aAAOoC,cAAc,CAACpC,KAAD,CAArB;AACD,KAFM,MAEA,IAAI,kBAAkBkB,IAAlB,CAAuBlB,KAAvB,CAAJ,EAAmC;AACxC,UAAI/F,IAAI,GAAG,YAAYiG,IAAZ,CAAiBF,KAAjB,EAAwB,CAAxB,CAAX;AACA,aAAO;AACLjD,mBAAW,EAAE,QADR;AAELvD,gBAAQ,EAAE,CACR;AACEuD,qBAAW,EAAE,MADf;AAEE9C,cAAI,EAAJA;AAFF,SADQ;AAFL,OAAP;AASD,KAXM,MAWA,IAAI,iBAAiBiH,IAAjB,CAAsBlB,KAAtB,CAAJ,EAAkC;AACvC,UAAI/F,KAAI,GAAG,YAAYiG,IAAZ,CAAiBF,KAAjB,EAAwB,CAAxB,CAAX;AACA,aAAO;AACLjD,mBAAW,EAAE,MADR;AAEL9C,YAAI,EAAE,MAAMA,KAAN,GAAa;AAFd,OAAP;AAID,KANM,MAMA,IAAI,eAAeiH,IAAf,CAAoBlB,KAApB,CAAJ,EAAgC;AACrC,aAAOQ,aAAa,CAACR,KAAD,CAApB;AACD,KAFM,MAEA,IAAI,sBAAsBkB,IAAtB,CAA2BlB,KAA3B,CAAJ,EAAuC;AAC5C,aAAOkD,mBAAmB,CAAClD,KAAD,CAA1B;AACD,KAFM,MAEA,IAAI,mBAAmBkB,IAAnB,CAAwBlB,KAAxB,CAAJ,EAAoC;AACzC,aAAOyD,aAAa,CAACzD,KAAD,CAApB;AACD;;AAED,WAAO;AACL3D,UAAI,EAAE,KADD;AAEL;AACA7C,cAAQ,EAAE,CAAC;AAAEuD,mBAAW,EAAE,MAAf;AAAuB9C,YAAI,EAAE;AAA7B,OAAD;AAHL,KAAP;AAKD;;AAED,MAAIH,OAAO,CAACiD,WAAR,IAAuB,MAA3B,EAAmC;AACjC;AACA,QAAI+E,MAAJ;AACA;;;;AAIA;;;;;;;;;;;AAUA,QAAIkC,SAAS,GAAG,sCAAhB;;AACA,QAAKlC,MAAK,GAAGkC,SAAS,CAAC9D,IAAV,CAAeF,KAAf,CAAb,EAAqC;AACnC,UAAIiE,OAAO,GAAGnC,MAAK,CAAC,CAAD,CAAnB;AAAA,UACEoC,QAAQ,GAAG,CAACpC,MAAK,CAAC,CAAD,CADnB;AAAA,UAEEqC,YAAY,GAAGrC,MAAK,CAAC,CAAD,CAAL,IAAY,CAACA,MAAK,CAAC,CAAD,CAFnC;AAAA,UAGE7F,YAAW,GAAG6F,MAAK,CAAC,CAAD,CAHrB;AAAA,UAIEsC,SAAS,GAAGtC,MAAK,CAAC,CAAD,CAAL,IAAY,EAJ1B,CADmC,CAOnC;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,UAAIuC,SAAJ,EAAeC,cAAf,EAA+BC,OAA/B,EAAwC1N,IAAxC,CAhBmC,CAkBnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,UAAI2N,QAAQ,GAAG,2EAA2EtE,IAA3E,CACb+D,OADa,CAAf;;AAIA,UAAIO,QAAQ,KAAK,IAAjB,EAAuB;AACrB;AACA,eAAO5K,OAAP;AACD;;AACDyK,eAAS,GAAGjF,UAAU,CAACoF,QAAQ,CAAC,CAAD,CAAR,IAAe,EAAhB,CAAtB;AACAD,aAAO,GAAGC,QAAQ,CAAC,CAAD,CAAR,IAAeA,QAAQ,CAAC,CAAD,CAAvB,IAA8BA,QAAQ,CAAC,EAAD,CAAhD;AACAF,oBAAc,GAAGE,QAAQ,CAAC,CAAD,CAAR,IAAeA,QAAQ,CAAC,CAAD,CAAvB,IAA8B,EAA/C;;AAEA,UAAI,WAAWH,SAAf,EAA0B;AACxBxN,YAAG,GAAGwN,SAAS,GAAGrF,eAAe,CAACuF,OAAD,CAA3B,GAAuCD,cAA7C;AACAzN,YAAG,GAAGA,IAAG,CAAC0C,OAAJ,CAAY,IAAZ,EAAkB,GAAlB,CAAN,CAFwB,CAEM;;AAC9B0C,oBAAW,GAAGiI,QAAQ,GAAGD,OAAH,GAAaE,YAAY,GAAGI,OAAH,GAAatI,YAA5D;;AAEA,YAAImI,SAAJ,EAAe;AACbnI,sBAAW,IAAImI,SAAf;AACD;;AAEDnI,oBAAW,GAAG,CAAC;AAAEc,qBAAW,EAAE,MAAf;AAAuB9C,cAAI,EAAEgC;AAA7B,SAAD,CAAd;AACA,eAAO;AACLI,cAAI,EAAE,UADD;AAELxF,aAAG,EAAHA,IAFK;AAGLoF,qBAAW,EAAXA;AAHK,SAAP;AAKD;AACF,KAzFgC,CA2FjC;AACA;AACA;;;AAEA,QAAIwI,MAAM,GAAGzE,KAAK,CAAC/C,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB5C,KAAnB,CAAyB,GAAzB,CAAb;AACA,QAAIqK,KAAK,GAAGD,MAAM,CAAC,CAAD,CAAlB;AACA,QAAIE,OAAO,GAAG,4BAAd;;AACA,QAAK7C,MAAK,GAAG6C,OAAO,CAACzE,IAAR,CAAawE,KAAb,CAAb,EAAmC;AACjC,UAAIrI,IAAI,GAAG,OAAX;AAAA,UACEmH,OAAO,GAAGxE,eAAe,CAAC8C,MAAK,CAAC,CAAD,CAAN,CAD3B;AAAA,UAEEyC,QAAO,GAAGvF,eAAe,CAAC8C,MAAK,CAAC,CAAD,CAAN,CAF3B;AAAA,UAGEjL,KAAG,aAAM2M,OAAN,cAAiBe,QAAjB,CAHL;;AAIA,UAAIK,IAAI,GAAG;AAAEvI,YAAI,EAAJA,IAAF;AAAQmH,eAAO,EAAPA,OAAR;AAAiB3M,WAAG,EAAHA;AAAjB,OAAX;AAAA,UACEC,OAAO,GAAG,EADZ;AAAA,UAEEwG,OAAO,GAAG,EAFZ;AAGA,UAAIuH,QAAQ,GAAG,yMAAf;AAAA,UACEC,WAAW,GAAG,oCADhB;;AARiC,kDAWbL,MAAM,CAACxH,KAAP,CAAa,CAAb,CAXa;AAAA;;AAAA;AAWjC,+DAAqC;AAAA,cAA1B8H,KAA0B;;AACnC;AACA,cAAI,CAACF,QAAQ,CAAC3D,IAAT,CAAc6D,KAAd,CAAL,EAA2B;AACzBzH,mBAAO,CAAC/C,IAAR,CAAawK,KAAb;AACA;AACD;;AAED,cAAIjD,OAAK,SAAT;;AACA,cAAKA,OAAK,GAAGgD,WAAW,CAAC5E,IAAZ,CAAiB6E,KAAjB,CAAb,EAAuC;AACrCjO,mBAAO,CAACyD,IAAR,CAAa;AAAElC,iBAAG,EAAEyJ,OAAK,CAAC,CAAD,CAAZ;AAAiBpC,mBAAK,EAAEoC,OAAK,CAAC,CAAD;AAA7B,aAAb;AACD,WAFD,MAEOhL,OAAO,CAACyD,IAAR,CAAawK,KAAb;AACR;AAtBgC;AAAA;AAAA;AAAA;AAAA;;AAwBjCzH,aAAO,GAAGnI,IAAI,CAACmI,OAAO,CAAC0H,IAAR,CAAa,GAAb,CAAD,CAAJ,CAAwBxL,QAAlC;AACA,+BAAYoL,IAAZ;AAAkB9N,eAAO,EAAPA,OAAlB;AAA2BwG,eAAO,EAAPA;AAA3B;AACD;AACF;;AACD,SAAO;AAAE9D,YAAQ,EAAEI;AAAZ,GAAP;AACD,CAtLD;;AAwLA,IAAMqL,OAAO,GAAG;AACZlI,aAAW,EAAE,SADD;AAEZmI,YAAU,EAAE,MAFA;AAGZC,UAAQ,EAAE,CAAC,KAAD,CAHE;AAIZC,iBAAe,EAAE;AAJL,CAAhB;AAAA,IAMEC,KAAK,GAAG;AACNtI,aAAW,EAAE,OADP;AAENmI,YAAU,EAAE,QAFN;AAGNC,UAAQ,EAAE,EAHJ;AAINC,iBAAe,EAAE,EAJX;AAKNE,WAAS,EAAE;AALL,CANV;AAAA,IAaEC,UAAU,GAAG;AACXxI,aAAW,EAAE,YADF;AAEXmI,YAAU,EAAE,OAFD;AAGXC,UAAQ,EAAE,CAAC,OAAD,CAHC;AAIXC,iBAAe,EAAE;AAJN,CAbf;AAAA,IAmBEI,IAAI,GAAG;AACLzI,aAAW,EAAE,MADR;AAELmI,YAAU,EAAE,KAFP;AAGLC,UAAQ,EAAE,CAAC,KAAD,CAHL;AAILC,iBAAe,EAAE;AAJZ,CAnBT;AAAA,IAyBEK,MAAM,GAAG;AACP1I,aAAW,EAAE,QADN;AAEPmI,YAAU,EAAE,IAFL;AAGPC,UAAQ,EAAE,CAAC,IAAD,CAHH;AAIPC,iBAAe,EAAE;AAJV,CAzBX;AAAA,IA+BEM,OAAO,GAAG;AACR3I,aAAW,EAAE,SADL;AAERmI,YAAU,EAAE,UAFJ;AAGRC,UAAQ,EAAE,CAAC,YAAD,CAHF;AAIRC,iBAAe,EAAE;AAJT,CA/BZ;AAAA,IAqCEO,IAAI,GAAG;AACL5I,aAAW,EAAE,MADR;AAELmI,YAAU,EAAE,IAFP;AAGLC,UAAQ,EAAE,CAAC,IAAD,CAHL;AAILC,iBAAe,EAAE,CAACI,IAAD,EAAOC,MAAP;AAJZ,CArCT;AAAA,IA2CEG,YAAY,GAAG;AACb7I,aAAW,EAAE,cADA;AAEbmI,YAAU,EAAE,GAFC;AAGbC,UAAQ,EAAE,CAAC,GAAD,CAHG;AAIbC,iBAAe,EAAE;AAJJ,CA3CjB;AAAA,IAiDES,QAAQ,GAAG;AACT9I,aAAW,EAAE,UADJ;AAETmI,YAAU,EAAE,IAFH;AAGTC,UAAQ,EAAE,CAAC,IAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CAjDb;AAAA,IAuDEU,QAAQ,GAAG;AACT/I,aAAW,EAAE,UADJ;AAETmI,YAAU,EAAE,KAFH;AAGTC,UAAQ,EAAE,CAAC,KAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CAvDb;AAAA,IA6DEW,QAAQ,GAAG;AACThJ,aAAW,EAAE,UADJ;AAETmI,YAAU,EAAE,MAFH;AAGTC,UAAQ,EAAE,CAAC,MAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CA7Db;AAAA,IAmEEY,QAAQ,GAAG;AACTjJ,aAAW,EAAE,UADJ;AAETmI,YAAU,EAAE,OAFH;AAGTC,UAAQ,EAAE,CAAC,OAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CAnEb;AAAA,IAyEEa,QAAQ,GAAG;AACTlJ,aAAW,EAAE,UADJ;AAETmI,YAAU,EAAE,QAFH;AAGTC,UAAQ,EAAE,CAAC,QAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CAzEb;AAAA,IA+EEc,QAAQ,GAAG;AACTnJ,aAAW,EAAE,UADJ;AAETmI,YAAU,EAAE,SAFH;AAGTC,UAAQ,EAAE,CAAC,SAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CA/Eb;AAAA,IAqFEe,SAAS,GAAG;AACVpJ,aAAW,EAAE,WADH;AAEVmI,YAAU,EAAE,MAFF;AAGVC,UAAQ,EAAE,CAAC,QAAD,EAAW,IAAX,CAHA;AAIVC,iBAAe,EAAE;AAJP,CArFd;AAAA,IA2FEjJ,QAAQ,GAAG;AACTY,aAAW,EAAE,UADJ;AAETmI,YAAU,EAAE,IAFH;AAGTC,UAAQ,EAAE,CAAC,IAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CA3Fb;AAAA,IAiGEgB,UAAU,GAAG;AACXrJ,aAAW,EAAE,aADF;AAEXmI,YAAU,EAAE,cAFD;AAGXC,UAAQ,EAAE,CAAC,eAAD,CAHC;AAIXC,iBAAe,EAAE,CAACK,MAAD,EAASD,IAAT,EAAeD,UAAf;AAJN,CAjGf;AAAA,IAuGEtC,QAAQ,GAAG;AACTlG,aAAW,EAAE,UADJ;AAETmI,YAAU,EAAE,IAFH;AAGTC,UAAQ,EAAE,CAAC,GAAD,CAHD;AAITC,iBAAe,EAAE;AAJR,CAvGb;AAAA,IA6GEiB,MAAM,GAAG;AACPtJ,aAAW,EAAE,QADN;AAEPmI,YAAU,EAAE,IAFL;AAGPC,UAAQ,EAAE,IAHH;AAIPC,iBAAe,EAAE,CACfH,OADe,EAEfS,OAFe,EAGfL,KAHe,EAIfE,UAJe,EAKfC,IALe,EAMfC,MANe,EAOfE,IAPe,EAQfC,YARe,EASfM,QATe,EAUfD,QAVe,EAWfD,QAXe,EAYfD,QAZe,EAafD,QAbe,EAcfD,QAde,EAefM,SAfe,EAgBfC,UAhBe,EAiBfjK,QAjBe;AAJV,CA7GX;AAsIAwJ,IAAI,CAACP,eAAL,CAAqB7K,IAArB,CAA0BoL,IAA1B;AACAF,MAAM,CAACL,eAAP,CAAuB7K,IAAvB,CAA4BoL,IAA5B;AACAQ,SAAS,CAACf,eAAV,CAA0B7K,IAA1B,CAA+B8K,KAA/B,EAAsClJ,QAAtC;AACAA,QAAQ,CAACiJ,eAAT,CAAyB7K,IAAzB,CAA8B4B,QAA9B,EAAwCgK,SAAxC,EAAmDR,IAAnD;AACA1C,QAAQ,CAACmC,eAAT,GAA2BiB,MAAM,CAACjB,eAAlC;;AAEA,IAAMkB,eAAe,GAAG,SAAlBA,eAAkB,CAAA7M,QAAQ,EAAI;AAClC,MAAI,CAACA,QAAQ,CAACJ,MAAd,EAAsB,OAAO,IAAP;;AACtB,MAAIkN,QAAQ,GAAG,SAAXA,QAAW,CAAA5L,OAAO;AAAA,WAAI,CAAC,gBAAgBuF,IAAhB,CAAqBvF,OAAO,CAACoC,WAA7B,EAA0C,CAA1C,CAAL;AAAA,GAAtB;;AACA,MAAIyJ,YAAY,GAAG,CAAnB;AAAA,MACEhP,GAAG,GAAG,EADR;AAAA,MAEEiP,cAAc,GAAGjP,GAFnB;AAIAA,KAAG,CAACkP,OAAJ,GAAc,EAAd;;AAPkC,8CASZjN,QATY;AAAA;;AAAA;AASlC,2DAAgC;AAAA,UAArBkB,OAAqB;AAC9B,UAAIgM,KAAK,GAAGJ,QAAQ,CAAC5L,OAAD,CAApB;AAAA,UACEiM,WAAW,GAAGjM,OAAO,CAACnB,QAAR,CAAiB,CAAjB,EAAoBS,IAApB,CAAyBsG,IAAzB,EADhB;AAAA,UAEEsG,SAAS,GAAGD,WAAW,CAACrN,OAAZ,CAAoB,IAApB,EAA0B,EAA1B,IAAgC,GAAhC,GAAsCoN,KAFpD,CAD8B,CAK9B;;AACAhM,aAAO,CAACgM,KAAR,GAAgBA,KAAhB;AACAhM,aAAO,CAACV,IAAR,GAAe2M,WAAf;AACAjM,aAAO,CAACD,EAAR,GAAamM,SAAb;AACAlM,aAAO,CAACF,SAAR,GAAoB,kBAAkBkM,KAAtC;AACAhM,aAAO,CAAC+L,OAAR,GAAkBD,cAAc,CAACC,OAAf,CAAuBzJ,KAAvB,EAAlB,CAV8B,CAY9B;;AACA,UAAI0J,KAAK,GAAGH,YAAZ,EAA0B;AACxB7L,eAAO,CAAC+L,OAAR,CAAgBnM,IAAhB,CAAqB,CAArB;AAEA,YAAI,CAACkM,cAAc,CAACK,gBAApB,EACEL,cAAc,CAACK,gBAAf,GAAkC,EAAlC;AACFnM,eAAO,CAACoM,aAAR,GAAwBN,cAAxB;AACAA,sBAAc,CAACK,gBAAf,CAAgCvM,IAAhC,CAAqCI,OAArC;AACD,OAPD,MAOO,IAAIgM,KAAK,IAAIH,YAAb,EAA2B;AAChC7L,eAAO,CAAC+L,OAAR,CAAgB/L,OAAO,CAAC+L,OAAR,CAAgBrN,MAAhB,GAAyB,CAAzC;AAEA,YAAI2N,MAAM,GAAGP,cAAc,CAACM,aAA5B;AACAC,cAAM,CAACF,gBAAP,CAAwBvM,IAAxB,CAA6BI,OAA7B;AACAA,eAAO,CAACoM,aAAR,GAAwBC,MAAxB;AACD,OANM,MAMA;AACLrM,eAAO,CAAC+L,OAAR,GAAkB/L,OAAO,CAAC+L,OAAR,CAAgBzJ,KAAhB,CAAsB,CAAtB,EAAyB0J,KAAzB,CAAlB;AACAhM,eAAO,CAAC+L,OAAR,CAAgB/L,OAAO,CAAC+L,OAAR,CAAgBrN,MAAhB,GAAyB,CAAzC;AAEA,YAAI4N,WAAW,GAAGR,cAAc,CAACM,aAAf,CAA6BA,aAA/C;AACAE,mBAAW,CAACH,gBAAZ,CAA6BvM,IAA7B,CAAkCI,OAAlC;AACAA,eAAO,CAACoM,aAAR,GAAwBE,WAAxB;AACD;;AACDR,oBAAc,GAAG9L,OAAjB;AACA6L,kBAAY,GAAGG,KAAf;AACD;AA7CiC;AAAA;AAAA;AAAA;AAAA;;AA8ClC,SAAOnP,GAAP;AACD,CA/CD;;AAiDA,IAAMpC,KAAK,GAAG,SAARA,KAAQ,CAACmK,GAAD,EAAM2H,MAAN,EAAcnN,KAAd,EAAqBmC,CAArB,EAA2B;AACvC,MAAIiL,MAAM,GAAG,EAAb;AAAA,MACEC,GADF;AAAA,MAEEpH,KAAK,GAAG,EAFV;AAAA,MAGEqH,WAHF;AAAA,MAIEzN,OAAO,GAAG,EAJZ;AAAA,MAKE9C,OAAO,GAAG,EALZ;AAAA,MAMEyG,cAAc,GAAG,CANnB;AAAA,MAOExF,MAAM,GAAG,EAPX;AAAA,MAQE0B,QAAQ,GAAG,EARb;AAAA,MASE6N,SATF;AAAA,MAUEC,YAVF;AAYAL,QAAM,GAAGA,MAAM,KAAK,IAAX,GAAkB3H,GAAG,CAAClG,MAAtB,GAA+B6N,MAAxC;AAbuC,MAcjCnK,WAdiC,GAcsBb,CAdtB,CAcjCa,WAdiC;AAAA,MAcpBmI,UAdoB,GAcsBhJ,CAdtB,CAcpBgJ,UAdoB;AAAA,MAcRC,QAdQ,GAcsBjJ,CAdtB,CAcRiJ,QAdQ;AAAA,MAcEC,eAdF,GAcsBlJ,CAdtB,CAcEkJ,eAdF;AAevCrL,OAAK,IAAImL,UAAU,KAAK,IAAf,GAAsB,CAAtB,GAA0BA,UAAU,CAAC7L,MAA9C;AACA2G,OAAK,IAAIkF,UAAU,KAAK,IAAf,GAAsB,EAAtB,GAA2BA,UAApC;;AAEA,SAAOnL,KAAK,GAAGmN,MAAf,EAAuB;AACrB;AACAK,gBAAY,GAAG,KAAf;AACAH,OAAG,GAAG,KAAN;;AAHqB,gDAIMhC,eAJN;AAAA;;AAAA;AAIrB,6DAA4C;AAAA,YAAjCoC,YAAiC;AAC1C,YAAI,CAAC3I,KAAK,CAACU,GAAD,EAAMiI,YAAY,CAACtC,UAAnB,EAA+BnL,KAA/B,CAAV,EAAiD;AACjDqN,WAAG,GAAG,IAAN;AACA,YAAID,MAAJ,EAAYvN,OAAO,CAACW,IAAR,CAAa;AAAEwC,qBAAW,EAAE,MAAf;AAAuB9C,cAAI,EAAEkN;AAA7B,SAAb;AACZA,cAAM,GAAG,EAAT;;AAEA,YAAKI,YAAY,GAAGC,YAAY,CAAClC,SAAjC,EAA6C;AAC3C1L,iBAAO,CAACW,IAAR,CAAa;AAAEwC,uBAAW,EAAEyK,YAAY,CAACzK;AAA5B,WAAb;AACAiD,eAAK,IAAIwH,YAAY,CAACtC,UAAtB;AACAnL,eAAK,IAAIyN,YAAY,CAACtC,UAAb,CAAwB7L,MAAjC;AACA;AACD;;AAXyC,sBAaRjE,KAAK,CAACmK,GAAD,EAAM2H,MAAN,EAAcnN,KAAd,EAAqByN,YAArB,CAbG;;AAAA;;AAazCzN,aAbyC;AAalCsN,mBAbkC;AAarBC,iBAbqB;AAc1CtH,aAAK,IAAIsH,SAAT;AACA1N,eAAO,CAACW,IAAR,CAAa8M,WAAb;;AAEA,YAAIG,YAAY,CAACzK,WAAb,IAA4B,WAAhC,EAA6C;AAC3CsK,qBAAW,CAAC9J,cAAZ,GAA6B,EAAEA,cAA/B;AACD;;AACD,YAAI,WAAW2C,IAAX,CAAgBmH,WAAW,CAACtK,WAA5B,MAA6C,IAAjD,EAAuD;AACrDtD,kBAAQ,CAACc,IAAT,CAAc8M,WAAd;AACD;;AAED,YACEA,WAAW,CAACtK,WAAZ,IAA2B,MAA3B,IACAsK,WAAW,CAAChL,IAAZ,IAAoB,OADpB,IAEAgL,WAAW,CAAC7D,OAAZ,IAAuB,MAHzB,EAIE;AACAzL,gBAAM,CAACwC,IAAP,CAAY8M,WAAZ;AACD;;AAED,YAAIA,WAAW,CAACtK,WAAZ,IAA2B,SAA/B,EAA0C;AACxChF,gBAAM,CAACwC,IAAP,OAAAxC,MAAM,kFAASsP,WAAW,CAACtP,MAArB,EAAN;AACD;;AAED;AACD;AAzCoB;AAAA;AAAA;AAAA;AAAA;;AA2CrB,QAAIwP,YAAJ,EAAkB;;AAElB,QAAI,CAACH,GAAL,EAAU;AACR,UAAIjC,QAAJ,EAAc;AACZ,YAAIsC,aAAa,GAAG,KAApB;;AADY,oDAEStC,QAFT;AAAA;;AAAA;AAEZ,iEAA+B;AAAA,gBAApBuC,MAAoB;;AAC7B,gBAAI7I,KAAK,CAACU,GAAD,EAAMmI,MAAN,EAAc3N,KAAd,CAAT,EAA+B;AAC7B0N,2BAAa,GAAG,IAAhB;AACA1N,mBAAK,IAAI2N,MAAM,CAACrO,MAAhB;AACA2G,mBAAK,IAAI0H,MAAT;;AAEA,kBAAIxL,CAAC,CAACa,WAAF,IAAiB,MAArB,EAA6B;AAC3B,uBAAOhD,KAAK,GAAGmN,MAAf,EAAuB;AACrB,sBAAIS,MAAM,GAAG,YAAb;;AACA,sBAAI9I,KAAK,CAACU,GAAD,EAAMoI,MAAN,EAAc5N,KAAd,CAAT,EAA+B;AAC7BA,yBAAK,IAAI4N,MAAM,CAACtO,MAAhB;AACA;AACD,mBAHD,MAGO,IAAI,KAAK6H,IAAL,CAAU3B,GAAG,CAACxF,KAAD,CAAb,CAAJ,EAA2B;AAChCiG,yBAAK,IAAIT,GAAG,CAACxF,KAAK,EAAN,CAAZ;AACD,mBAFM,MAEA;AACR;AACF;AACF,aAjB4B,CAiB3B;;AACH,WApBW,CAoBV;;AApBU;AAAA;AAAA;AAAA;AAAA;;AAqBZ,YAAI0N,aAAJ,EAAmB;AACpB,OAvBO,CAuBN;;;AAEF,UAAI1N,KAAK,GAAGmN,MAAZ,EAAoB;AAClBlH,aAAK,IAAIT,GAAG,CAACxF,KAAD,CAAZ;AACAoN,cAAM,IAAI5H,GAAG,CAACxF,KAAK,EAAN,CAAb;AACD;AACF,KA1EoB,CA0EnB;;AACH;;AAED,MAAIoN,MAAJ,EAAYvN,OAAO,CAACW,IAAR,CAAa;AAAEwC,eAAW,EAAE,MAAf;AAAuB9C,QAAI,EAAEkN;AAA7B,GAAb;AAEZ,MAAI3P,GAAG,GAAG,CACRuC,KADQ,EAERyF,KAAK;AACHzC,eAAW,EAAXA,WADG;AAEHtD,YAAQ,EAAE6M,eAAe,CAAC7M,QAAD,CAFtB;AAGH1B,UAAM,EAANA;AAHG,KAIA+L,aAAa,CAAC5H,CAAD,EAAItC,OAAJ,EAAaoG,KAAb,EAAoBlJ,OAApB,CAJb,EAFG,EAQRkJ,KARQ,CAAV,CAjGuC,CA4GvC;AACA;;AAEA,SAAOxI,GAAP;AACD,CAhHD;;AAkHA,IAAMrC,IAAI,GAAG,SAAPA,IAAO,CAAAoK,GAAG;AAAA,SAAKA,GAAG,GAAGnK,KAAK,CAACmK,GAAD,EAAM,IAAN,EAAY,CAAZ,EAAe8G,MAAf,CAAL,CAA4B,CAA5B,CAAH,GAAoC,EAA5C;AAAA,CAAhB,C,CAEA;;;CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AA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","file":"wiki.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t4: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([120,0,3]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import \"./../../scss/main.scss\";\nimport \"./../../components/WikiApp/style.sass\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport App from \"./../../components/WikiApp\";\n\nReactDOM.render(<App />, document.getElementById(\"wikiapp\"));\n","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588006400816\n      var cssReload = require(\"/Users/hoangnam/Dev/Templates/ReactJS/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import { main } from \"./../wiki_parser\";\n\nconst parseWikiText = response => main(response?.parse?.wikitext?.[\"*\"]);\n\nconst buildURL = params =>\n  \"https://en.wikipedia.org/w/api.php?\" +\n  new URLSearchParams({ ...params, format: \"json\", origin: \"*\" });\n\nconst pageContentParams = title => ({\n  action: \"parse\",\n  prop: \"wikitext\",\n  page: title\n});\n\nconst imageParams = (title, limit = 500) => ({\n  action: \"query\",\n  prop: \"imageinfo\",\n  titles: title,\n  generator: \"images\",\n  gimlimit: limit,\n  iiprop: \"url|dimensions\"\n});\n\nconst summaryParams = title => ({\n  action: \"query\",\n  prop: \"extracts\",\n  exsentences: 2,\n  exintro: true,\n  explaintext: true,\n  exsectionformat: \"plain\",\n  redirects: 1,\n  titles: title\n});\n\nexport {\n  parseWikiText,\n  buildURL,\n  pageContentParams,\n  imageParams,\n  summaryParams\n};\n","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588006403847\n      var cssReload = require(\"/Users/hoangnam/Dev/Templates/ReactJS/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588006402367\n      var cssReload = require(\"/Users/hoangnam/Dev/Templates/ReactJS/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588006402342\n      var cssReload = require(\"/Users/hoangnam/Dev/Templates/ReactJS/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import { useState, useEffect } from \"react\";\n\nconst useFetch = (url, options = {}) => {\n  const [response, setResponse] = useState(null);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsLoading(true);\n      try {\n        const res = await fetch(url, options);\n        const json = await res.json();\n        setResponse(json);\n        setIsLoading(false);\n      } catch (error) {\n        setError(error);\n      }\n    };\n    fetchData();\n  }, []);\n\n  return { response, error, isLoading };\n};\n\nexport default useFetch;\n","import { useEffect, useState } from \"react\";\nimport {\n  parseWikiText,\n  buildURL,\n  pageContentParams,\n  imageParams,\n  summaryParams\n} from \"./../WikiWrapper\";\nimport useFetch from \"./useFetch.js\";\n\nconst usePageContent = title => {\n  const [pageContent, setPageContent] = useState(null);\n  const pageContentFetcher = useFetch(buildURL(pageContentParams(title)));\n  useEffect(() => {\n    setPageContent(parseWikiText(pageContentFetcher.response));\n  }, [pageContentFetcher.response]);\n  return pageContent;\n};\n\nconst useImages = title => {\n  const [images, setImages] = useState(null);\n  const imageFetch = useFetch(buildURL(imageParams(title)));\n  useEffect(() => {\n    let imgs = imageFetch.response?.query?.pages,\n      res = {};\n    // return object {filename: {url, width, height}}\n    for (const key in imgs) {\n      let { url, width, height } = imgs[key]?.imageinfo?.[0];\n      res[imgs[key].title] = { url, width, height };\n    }\n    setImages(res);\n  }, [imageFetch.response]);\n  return images;\n};\n\nconst useSummary = (title, show) => {\n  const [summary, setSummary] = useState(null);\n  const summaryFetch = useFetch(buildURL(summaryParams(title)), { show });\n  useEffect(() => {\n    let pages = summaryFetch.response?.query?.pages;\n    if (pages) {\n      let extract = null;\n      for (const key in pages) {\n        extract = pages[key]?.extract;\n      }\n      setSummary(extract);\n    }\n  }, [summaryFetch.response, show]);\n  return summary;\n};\n\nexport { usePageContent, useImages, useSummary };\n","import React, { Fragment } from \"react\";\nimport Content from \"./../Content\";\nimport Menu from \"./../Menu\";\nimport Navigation from \"./../Navigation\";\nimport { usePageContent, useImages } from \"./../../../hooks/useWiki.js\";\nimport { SkeletonTheme } from \"react-loading-skeleton\";\n\nimport \"lazysizes\";\n// import { Tooltip } from \"react-lightweight-tooltip\";\n\n// import Sidebar from \"./../SideBar\";\n// import Reference from \"./../Reference\";\n\nexport const ImagesContext = React.createContext(null);\n\nconst titles = [\n  // \"Pet_door\"\n  \"New_York_City\",\n  \"The_Last_Supper_(Leonardo)\",\n  \"Leonardo_da_Vinci\",\n  \"Mona_Lisa\",\n  \"Renaissance\"\n];\n\nconst title = titles[Math.floor(Math.random() * titles.length)];\n\nconst Article = () => {\n  const pageContent = usePageContent(title);\n  const images = useImages(title);\n\n  // get references\n  // useEffect(() => {\n  //   if (parsed.children) {\n  //     let res = [];\n  //     for (const element of parsed.children) {\n  //       if (element.elementName == \"Reference\") {\n  //         res.push(element);\n  //       }\n  //     }\n  //     setReferences(res);\n  //   }\n  // }, [parsed]);\n\n  return (\n    <ImagesContext.Provider value={{ images }}>\n      <Fragment>\n        <Menu />\n        <SkeletonTheme color=\"#202020\" highlightColor=\"#444\">\n          <div className=\"article\">\n            {/*<Sidebar content={parsed.images} images={images} />*/}\n            <div className=\"hero\">\n              <div className=\"hero__title\">{title.replace(/_/g, \" \")}</div>\n              <div className=\"hero__credit\">\n                From Wikipedia, the free encyclopedia\n              </div>\n              <Content content={pageContent?.children} />\n              {/*<Reference {...{ references }} />*/}\n            </div>\n          </div>\n        </SkeletonTheme>\n        <Navigation headings={pageContent?.headings} />\n      </Fragment>\n    </ImagesContext.Provider>\n  );\n};\n\nexport default Article;\n","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1588006404729\n      var cssReload = require(\"/Users/hoangnam/Dev/Templates/ReactJS/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import React from \"react\";\nimport Article from \"./Article\";\nconst App = () => {\n  return <Article />;\n};\n\nexport default App;\n","import React, { Fragment } from \"react\";\nimport { Element } from \"./../Elements\";\n\nconst Content = ({ content, images }) => {\n  if (!content) return \"Loading...\";\n\n  return (\n    <Fragment>\n      {content.map((element, index) => (\n        <Element key={index} props={element} images={images} />\n      ))}\n    </Fragment>\n  );\n};\n\nexport default Content;\n","import React, { Fragment, useState, useEffect } from \"react\";\nimport { ImagesContext } from \"./../Article\";\nimport Tooltip from \"./../Tooltip\";\n// import { useSummary } from \"./../../../hooks/useWiki.js\";\n\nexport const Text = ({ text }) => {\n  let [splitText, setSplitText] = useState(\"\");\n  useEffect(() => {\n    let paragraphs = text.split(\"\\n\\n\"),\n      res = [];\n    for (let i = 0; i < paragraphs.length; i++) {\n      res.push(<span key={-i - 1}>{paragraphs[i]}</span>);\n      if (i < paragraphs.length - 1) {\n        res.push(<br key={i} />);\n      }\n    }\n    setSplitText(res);\n  }, []);\n  return <Fragment>{splitText}</Fragment>;\n};\n\nconst Heading = ({ className, id, text }) => {\n  const heading = React.useRef();\n\n  const isElementInViewport = () => {\n    // console.log(\"text\");\n    let el = heading.current;\n    // Special bonus for those using jQuery\n\n    var rect = el.getBoundingClientRect();\n\n    let res =\n      rect.top >= 0 &&\n      rect.left >= 0 &&\n      rect.bottom <=\n        (window.innerHeight || document.documentElement.clientHeight) &&\n      rect.right <= (window.innerWidth || document.documentElement.clientWidth);\n    if (res) {\n      console.log(text);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", isElementInViewport);\n    return () => window.removeEventListener(\"scroll\", isElementInViewport);\n  }, []);\n\n  return (\n    <div ref={heading} className={className} id={id}>\n      {text}\n    </div>\n  );\n};\n\nconst WikiLink = ({ url, displayText }) => {\n  return (\n    <Tooltip url={url}>\n      <a href={\"https://en.wikipedia.org/wiki/\" + url}>\n        {displayText.map((e, i) => {\n          return <Element key={i} props={e} />;\n        })}\n      </a>\n    </Tooltip>\n  );\n};\n\nexport const Template = ({ props }) => {\n  if (props.type == \"N/A\" || props.type == \"Infobox\") return \"\";\n\n  if (Array.isArray(props.children)) {\n    return (\n      <Fragment>\n        {props.children.map((e, i) => (\n          <Element key={i} props={e} />\n        ))}\n      </Fragment>\n    );\n  }\n\n  let { attribute } = props;\n  // console.log(props);\n  if (props.type == \"multipleImages\") {\n    return (\n      <div className=\"wiki-gallery\">\n        {props.images &&\n          props.images.map((e, i) => {\n            return <Element key={i} props={e} />;\n          })}\n      </div>\n    );\n  }\n  if (props.type == \"cite\")\n    return (\n      <Fragment>\n        <a className=\"wiki-cite\" href={attribute.url}>\n          {`\"${attribute.title}\"`}\n        </a>\n        {\". \"}\n        {props.subType == \"web\" && attribute.publisher && (\n          <span>{`${attribute.publisher}. `}</span>\n        )}\n        {props.subType == \"web\" && attribute.accessdate && (\n          <span>{`Retrieved ${attribute.accessdate}. `}</span>\n        )}\n      </Fragment>\n    );\n\n  return \"<--N/A\" + JSON.stringify(props) + \"-->\";\n};\n\nexport const Element = ({ props }) => {\n  let { elementName, children } = props;\n\n  if (elementName == \"Comment\") return \"\";\n\n  if (elementName == \"ExternalLink\") {\n    return (\n      <a href={\"https://en.wikipedia.org/wiki/\" + props.url}>\n        {props.displayText}\n      </a>\n    );\n  }\n\n  if (elementName == \"Break\") {\n    return <br />;\n  }\n\n  if (elementName == \"Text\") {\n    return <Text text={props.text} />;\n  }\n\n  if (elementName == \"Template\") {\n    return <Template {...{ props }} />;\n  }\n\n  let renderChildren;\n  if (Array.isArray(children)) {\n    renderChildren = children.map((e, i) => <Element key={i} props={e} />);\n  }\n\n  if (elementName == \"Bold\") {\n    return <span className=\"wiki-bold\">{renderChildren}</span>;\n  }\n\n  if (elementName == \"Italic\") {\n    return <span className=\"wiki-italic\">{renderChildren}</span>;\n  }\n\n  if (elementName == \"BoldItalic\") {\n    return <span className=\"wiki-italic wiki-bold\">{renderChildren}</span>;\n  }\n\n  if (elementName == \"Block Quote\") {\n    return <blockquote>{renderChildren}</blockquote>;\n  }\n\n  if (elementName.slice(0, -1) == \"Heading\") {\n    return <Heading {...props} />;\n  }\n\n  if (elementName == \"Gallery\") {\n    return (\n      <div className=\"wiki-gallery\">\n        {props.images.map((e, i) => {\n          return <Element key={i} props={e} />;\n        })}\n      </div>\n    );\n  }\n\n  if (elementName == \"Link\") {\n    let type = props.type;\n    if (type == \"wikiLink\") {\n      return <WikiLink url={props.url} displayText={props.displayText} />;\n    }\n    if (type == \"media\") {\n      const valueImages = React.useContext(ImagesContext);\n\n      if (props && props.url && valueImages && valueImages.images[props.url]) {\n        let float =\n          props.options && props.options.indexOf(\"left\") > -1\n            ? \"fl-left\"\n            : \"fl-right\";\n        return (\n          <Fragment>\n            <div className={`wiki-img__container ${float}`}>\n              <img\n                id={props.url}\n                className=\"lazyload wiki-img__image\"\n                data-src={valueImages.images[props.url].url}\n              />\n              <div className=\"wiki-img__caption\">\n                {props.caption\n                  ? props.caption.map((e, i) => <Element key={i} props={e} />)\n                  : \"\"}\n              </div>\n            </div>\n          </Fragment>\n        );\n      }\n    }\n  } else if (elementName == \"Reference\") {\n    if (\n      props.children &&\n      props.children.length &&\n      props.children[0].attribute &&\n      props.children[0].attribute.url\n    ) {\n      return (\n        <sup>\n          <a href={props.children[0].attribute.url}>{props.referenceIndex}</a>\n        </sup>\n      );\n    }\n    return (\n      <sup>\n        <a href={props}>{props.referenceIndex}</a>\n      </sup>\n    );\n  }\n  return JSON.stringify(props);\n};\n","import React, { useState } from \"react\";\nimport { buildURL, summaryParams } from \"./../../../WikiWrapper\";\nimport Skeleton from \"react-loading-skeleton\";\nimport \"./style.sass\";\n\nconst extractSummary = (json, maxchar = 300) => {\n  let content = json.query?.pages,\n    extract = null,\n    title = json.query?.normalized?.[0]?.to;\n  for (const key in content) extract = content[key]?.extract;\n  extract = extract.substr(0, maxchar) + \"...\";\n  return { extract, title };\n};\n\nconst Tooltip = props => {\n  const { url, children } = props;\n  const [show, setShow] = useState(false);\n  const [summary, setSummary] = useState(null);\n  const [title, setTitle] = useState(null);\n  const handleMouseIn = () => setShow(true);\n  const handleMouseOut = () => setShow(false);\n\n  React.useEffect(() => {\n    if (show && !summary) {\n      fetch(buildURL(summaryParams(url)))\n        .then(response => response.json())\n        .then(json => {\n          let { extract, title } = extractSummary(json);\n          setSummary(extract);\n          setTitle(title || url);\n        })\n        .catch(error => console.error(error));\n    }\n  }, [show]);\n\n  return (\n    <div\n      className=\"tooltip\"\n      onMouseOver={handleMouseIn}\n      onMouseLeave={handleMouseOut}\n    >\n      {show && (\n        <div className=\"tooltip-content top\">\n          {title ? (\n            <h3\n              style={{ marginTop: 0, marginBottom: \"5rem\" }}\n              className=\"tooltip-title\"\n            >\n              {title}\n            </h3>\n          ) : (\n            <Skeleton height={100} duration={1} />\n          )}\n          {summary}\n        </div>\n      )}\n\n      {React.Children.toArray(children)}\n    </div>\n  );\n};\n\nexport default Tooltip;\n","import convert from \"convert-units\";\n//\n// var convert = require(\"convert-units\");\nconst UNITS = convert().list();\nconst ABBR_UNITS = convert()\n  .list()\n  .map(unit => unit.abbr);\n\nconst taste = (s, t, i) => s[i] == t[0] && s.substr(i, t.length) == t;\n\nconst capitalizeFirst = string =>\n  string.charAt(0).toUpperCase() + string.slice(1);\n\nconst capitalize = string =>\n  string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n\nconst trimQuote = str =>\n  str && '\"' == str[0] && '\"' == str[str.length - 1]\n    ? str.slice(1, str.length - 1)\n    : str;\n\nconst clean = obj => {\n  let res = {};\n  for (const key in obj) {\n    let value = obj[key];\n    if (\n      value === null ||\n      value === undefined ||\n      (Array.isArray(value) && value.length === 0) ||\n      (Object.keys(value).length === 0 && value.constructor === Object)\n    )\n      continue;\n    res[key] = value;\n  }\n  return res;\n};\n\nconst CiteParser = plain => {\n  let R_CITE = /\\{\\{cite (?<subType>\\w+)\\s*\\|?(?<attributes>[\\S\\s]*)}}$/gi;\n\n  let { subType, attributes } = R_CITE.exec(plain).groups,\n    attribute = {};\n\n  for (const pair of attributes.split(\"|\")) {\n    let equalIndex = pair.indexOf(\"=\");\n    let [key, value] = [\n      pair.slice(0, equalIndex),\n      pair.slice(equalIndex + 1).trim()\n    ];\n    attribute[key] = value;\n  }\n  return { type: \"cite\", subType, attribute };\n};\n\nconst ConvertParser = plain => {\n  const toMetric = fromUnit => {\n    let res = null;\n    try {\n      for (const toUnit of convert()\n        .from(fromUnit)\n        .possibilities()) {\n        let fromSystem = convert().describe(toUnit).system;\n        if (\"metric\" == fromSystem) res = toUnit;\n      }\n    } catch {\n      return null;\n    }\n    return res;\n  };\n\n  const toAbbr = str => {\n    if (/^°?[CF]$/.test(str)) return str;\n    let lower = str.toLowerCase();\n    for (const unit of UNITS) {\n      if (\n        unit.abbr.toLowerCase() == lower ||\n        unit.singular.toLowerCase() == lower ||\n        unit.plural.toLowerCase() == lower\n      )\n        return unit.abbr;\n    }\n    return str;\n  };\n\n  let tokens = plain.slice(2, -2).split`|`,\n    numbers = null,\n    fromUnit,\n    toUnit = null,\n    answer = null;\n\n  tokens.shift();\n\n  numbers = tokens.shift();\n\n  fromUnit = toAbbr(tokens.shift());\n\n  if (/^°?C$/.test(fromUnit)) {\n    fromUnit = \"°C\";\n    toUnit = \"°F\";\n    answer = +numbers / (5 / 9) + 32;\n  } else if (/^°?F$/.test(fromUnit)) {\n    fromUnit = \"°F\";\n    toUnit = \"°C\";\n    answer = (+numbers - 32) * (5 / 9);\n  } else {\n    if (tokens.length && ABBR_UNITS.indexOf(tokens[0]) != -1) {\n      toUnit = tokens.shift();\n    }\n\n    if (!toUnit) toUnit = toMetric(fromUnit);\n    if (numbers && toUnit && fromUnit) {\n      try {\n        answer = convert(+numbers)\n          .from(fromUnit)\n          .to(toUnit);\n      } catch {\n        return {\n          elementName: \"Text\",\n          text: `${numbers} ${fromUnit}`\n        };\n      }\n    }\n  }\n\n  answer = answer ? answer.toFixed(2) : null;\n  if (fromUnit && toUnit && answer !== null) {\n    return {\n      elementName: \"Text\",\n      text: `${numbers} ${fromUnit} (${answer} ${toUnit})`\n    };\n  }\n\n  return {\n    elementName: \"Text\",\n    text: `${numbers} ${fromUnit}`\n  };\n};\n\nconst ReferenceParser = plain => {\n  let refname,\n    refgroup,\n    children,\n    match,\n    remain = plain;\n\n  // 1. Extract tag name\n  const R_HEAD = /^<ref(erences)? *(?<remain>[\\s\\S]*)$/gi;\n  if ((match = R_HEAD.exec(plain)) === null)\n    throw \"Reference Synxtax Error \" + plain;\n\n  remain = match.groups.remain;\n\n  // 2. Try extract refgroup\n  const R_GROUP = /^group *= *(?<refgroup>\\\"[^#\\\"\\'\\/=>\\?\\\\]+\\\"|[^\\#\\\"\\'\\/=>\\?\\\\ ]+)\\s*(?<remain>[\\s\\S]*)$/gi;\n  if ((match = R_GROUP.exec(remain)) !== null) {\n    ({ remain, refgroup } = match.groups);\n    refgroup = trimQuote(refgroup);\n  }\n\n  // 3. Try extract refname\n  const R_NAME = /^name *= *(?<refname>\\\"[^#\\\"\\/=>\\\\]+\\\"|[^\\#\\\"\\'\\/=>\\?\\\\ ]+)\\s*(?<remain>[\\s\\S]*)$/gi;\n  if ((match = R_NAME.exec(remain)) !== null) {\n    ({ remain, refname } = match.groups);\n    refname = trimQuote(refname);\n  }\n\n  // 4.1. Reuse Reference\n  if (/^\\s*\\/>$/.exec(remain)) {\n    return { type: \"reuse\", refname, refgroup };\n  }\n\n  // 4.2. Firstuse Reference\n  const R_FIRSTUSE = /^>(?<children>[\\s\\S]+)<\\/ref>$/gi;\n  if ((match = R_FIRSTUSE.exec(remain)) === null) {\n    throw \"Firstuse Reference Error \" + remain;\n  }\n\n  children = main(match.groups.children).children;\n  refname = trimQuote(refname);\n  refgroup = trimQuote(refgroup);\n\n  return { type: \"firstuse\", refname, refgroup, children };\n};\n\nconst FootnoteParser = plain => {\n  let match,\n    remain,\n    fnGroup,\n    fnName,\n    subType,\n    children,\n    type = \"footnote\";\n\n  // 1. Extract subType footnote\n  const R_FOOTNOTE = /^\\{\\{(?<subType>[^|]+)\\|(?<remain>[\\S\\s]+)}}$/;\n  if ((match = R_FOOTNOTE.exec(plain)) === null) throw \"Footnote Error\";\n  ({ subType, remain } = match.groups);\n\n  // 2. Extract group footnote\n  const R_GROUP = /^group=(?<fnGroup>\\\"[^#\\\"\\'\\/=>\\?\\\\]+\\\"|[^\\#\\\"\\'\\/=>\\?\\\\ ]+)\\|(?<remain>[\\s\\S]+)$/;\n  if ((match = R_GROUP.exec(remain)) !== null) {\n    ({ fnGroup, remain } = match.groups);\n  }\n\n  // 3. Extract name footnote\n  const R_NAME = /^name=(?<fnName>\\\"[^#\\\"\\'\\/=>\\?\\\\]+\\\"|[^\\#\\\"\\'\\/=>\\?\\\\ ]+)(\\|(?<remain>[\\s\\S]+))?$/;\n  if ((match = R_NAME.exec(remain)) !== null) {\n    ({ fnName, remain } = match.groups);\n  }\n\n  // 4. Parse real content footnote\n  children = remain ? main(remain).children : [];\n\n  // NOTE: numering foonote will be done in analyseReference function\n  return { type, subType, fnName, fnGroup, children };\n};\n\nconst GalleryParser = plain => {\n  const R_GALLERY = /\\<gallery\\s+(?<attr>[^>]+)?>(?<content>[\\s\\S]+)<\\/gallery>/gi;\n  let match,\n    attr,\n    content,\n    attributes = {};\n  if ((match = R_GALLERY.exec(plain)) === null) throw \"Gallery Syntax Error\";\n\n  ({ attr, content } = match.groups);\n\n  const R_PAIR = /\\s*(?<key>\\w+)=(?<value>\\\"[^#\\\"\\'\\/=>\\?\\\\]+\\\"|[^\\#\\\"\\'\\/=>\\?\\\\ ]+)/g;\n\n  while ((match = R_PAIR.exec(attr)) !== null) {\n    let { key, value } = match.groups;\n    attributes[key] = trimQuote(value);\n  }\n\n  let images = [];\n  for (let image of content.split(\"\\n\")) {\n    if (/^\\s*$/g.exec(image)) continue;\n    image = /^\\s*([\\s\\S]+)\\s*$/g.exec(image)[0];\n    images.push(main(`[[${image}]]`).children[0]);\n  }\n  return { attributes, images };\n};\n\nconst parsePairPipe = plain => {\n  let res = {},\n    remain = plain,\n    key,\n    nextIndex,\n    parsedPlain,\n    match;\n\n  const R_KEY = /^[\\|\\s]*(?<key>\\w+)\\s*=(?<remain>[\\s\\S]*)$/;\n\n  while (remain) {\n    if ((match = R_KEY.exec(remain)) === null)\n      throw \"PairPipe Syntax Error \" + remain;\n    ({ key, remain } = match.groups);\n\n    [nextIndex, , parsedPlain] = parse(remain, null, 0, PairPipe);\n    remain = remain.substr(nextIndex);\n\n    let value = parsedPlain;\n    match = /^\\s*(?<value>[\\s\\S]+?)[\\|\\s]*$/.exec(value);\n    if (match === null) throw `Infobox Syntax Error ${value}`;\n    value = match.groups.value;\n    res[key] = value == \"|\" ? \"\" : value;\n  }\n\n  return res;\n};\n\nconst MultipleImageParser = plain => {\n  const R_MULTIPLE_IMAGES = /^\\{\\{multiple image\\s*\\|(?<remain>[\\s\\S]+)}}$/gi;\n\n  let match = R_MULTIPLE_IMAGES.exec(plain),\n    attributes = {},\n    images = [];\n\n  if (match === null) throw \"MultipleImageParser Error \" + plain;\n\n  let { remain } = match.groups;\n\n  let R_KEY_IMAGE = /^\\s*(?<imageKey>[a-z\\-\\_]+)(?<imageID>\\d+)\\s*$/i;\n\n  let pairs = parsePairPipe(remain);\n\n  for (const key of Object.keys(pairs)) {\n    const value = pairs[key];\n    if ((match = R_KEY_IMAGE.exec(key)) === null) {\n      attributes[key] = value;\n      continue;\n    }\n\n    let { imageKey, imageID } = match.groups;\n    imageID = +imageID - 1;\n    if (images[imageID] === undefined) images.push({});\n    if (\"image\" == imageKey) {\n      images[imageID].url = \"File:\" + value.trim();\n    } else if (\"caption\" == imageKey) {\n      images[imageID].caption = main(value).children;\n    } else images[imageID][imageKey] = value;\n  }\n\n  images = images.map(image => ({\n    elementName: \"Link\",\n    type: \"media\",\n    supType: \"File\",\n    url: image.url,\n    options: [],\n    caption: image.caption || [{ elementName: \"Text\", text: \"\" }]\n  }));\n\n  return { type: \"multipleImages\", images, attributes };\n};\n\nconst InfoboxParser = plain => {\n  const R_INFO = /^\\{\\{Infobox (?<subtype>[^|]+)\\s*\\|(?<remain>[\\s\\S]+)}}$/gi;\n  let match = R_INFO.exec(plain),\n    subtype,\n    remain,\n    sections = [];\n  if (match === null) throw \"Infobox Syntax Error\" + plain;\n\n  ({ subtype, remain } = match.groups);\n\n  for (const section of remain.split`----`) {\n    // console.log(section);\n    // console.log(\"--------------\");\n\n    let attributes = parsePairPipe(section);\n\n    // clean leading space and trailing \"|\" and \"---\"\n\n    // for (const key of Object.keys(attributes)) {\n    //   let value = attributes[key];\n    //   match = /^(?<content>[\\s\\S]+?)[\\|\\s]*$/.exec(value);\n    //   if (match === null) throw `Infobox Syntax Error ${value}`;\n    //   content = match.groups.content;\n    //   attributes[key] = content == \"|\" ? \"\" : content;\n    // }\n    sections.push(attributes);\n  }\n\n  return { type: \"Infobox\", subtype, sections };\n};\n\nconst internalParse = (element, content, plain) => {\n  if (element.elementName == \"Reference\") {\n    return ReferenceParser(plain);\n  }\n\n  if (element.elementName == \"Gallery\") return GalleryParser(plain);\n\n  if (element.elementName == \"ExternalLink\") {\n    const R_EXTERNAL = /^\\[(?<url>\\S+)( (?<displayText>[\\s\\S]+))?\\]$/gi;\n    let match, url, displayText;\n    if ((match = R_EXTERNAL.exec(plain)) !== null) {\n      ({ url, displayText } = match.groups);\n      return { url, displayText };\n    } else {\n      throw \"ExternalLink Grammar Error\";\n    }\n  }\n\n  if (element.elementName == \"Template\") {\n    if (/^{{[Cc]ite/g.test(plain)) {\n      return CiteParser(plain);\n    } else if (/^{{(refn|efn|efn-(la|ua|lr|ur|lg))\\|/.test(plain)) {\n      return FootnoteParser(plain);\n    } else if (/^{{lang-\\w+\\|/gi.test(plain)) {\n      let text = /\\|(.*)}}$/.exec(plain)[1];\n      return {\n        elementName: \"Italic\",\n        children: [\n          {\n            elementName: \"Text\",\n            text\n          }\n        ]\n      };\n    } else if (/^{{IPA-\\w+\\|/gi.test(plain)) {\n      let text = /\\|(.*)}}$/.exec(plain)[1];\n      return {\n        elementName: \"Text\",\n        text: \"[\" + text + \"]\"\n      };\n    } else if (/^{{convert/gi.test(plain)) {\n      return ConvertParser(plain);\n    } else if (/^{{multiple image/gi.test(plain)) {\n      return MultipleImageParser(plain);\n    } else if (/^{{Infobox \\w+/gi.test(plain)) {\n      return InfoboxParser(plain);\n    }\n\n    return {\n      type: \"N/A\",\n      // children: [{ elementName: \"Text\", text: `<--N/A--${plain}-->` }]\n      children: [{ elementName: \"Text\", text: \"N/A\" }]\n    };\n  }\n\n  if (element.elementName == \"Link\") {\n    // console.log({ plain });\n    let match;\n    /********************************\n     *          FREE LINK\n     *******************************/\n\n    /*\n    /* ^\n    /*  \\[\\[            startTokent\n    /*  ([^|]+)         fullUrl\n    /*  (\\|([^|]+)?)?   optinal (pipe and optinal display text)\n    /*  \\]\\]            endToken\n    /*  (\\w+)?          suffixStr\n    /* $\n    */\n\n    let R_ARTICLE = /^\\[\\[([^|]+)(\\|([^|]+)?)?\\]\\](\\w+)?$/;\n    if ((match = R_ARTICLE.exec(plain))) {\n      let fullUrl = match[1],\n        nonePipe = !match[2],\n        trailingPipe = match[2] && !match[3],\n        displayText = match[3],\n        suffixStr = match[4] || \"\";\n\n      // console.log({\n      //   fullUrl,\n      //   nonePipe,\n      //   trailingPipe,\n      //   displayText,\n      //   suffixStr\n      // });\n\n      // Manipulate the url\n      let namespace, disambiguation, rootUrl, url;\n\n      //\n      // ^\n      //  ((\\w+):)?   namespace?\n      //  (\n      //      ([\\w\\-,. ]+)( \\((.+)\\))  commas has priority over parantheses\n      //    |\n      //      ([\\w\\-. ]+)\n      //      (\n      //          \\((.+)\\)          trailing parentheses\n      //        |\n      //          , (.+)            trailing comma\n      //      )?\n      //  )\n      // $\n\n      // let urlMatch = /^(:?(\\w+):)?\n      // (\n      //   ([\\w\\-,.#\\\"\\(\\) ]+)( \\((.+)\\))\n      //   |\n      //   ([\\w\\-.#\\\"\\(\\) ]+)( \\((.+)\\)|, (.+))?\n      // )$/.exec(\n      //   fullUrl\n      // );\n      // ([\\w\\-,.#\\\"\\(\\) ]+)( \\((.+)\\))\n\n      let urlMatch = /^(:?(\\w+):)?(([^\\(]+)( \\((.+)\\))|([^,(]+)( \\((.+)\\)|, (.+))?|([\\s\\S]*))$/.exec(\n        fullUrl\n      );\n\n      if (urlMatch === null) {\n        // console.log(\"@\");\n        return content;\n      }\n      namespace = capitalize(urlMatch[1] || \"\");\n      rootUrl = urlMatch[4] || urlMatch[7] || urlMatch[11];\n      disambiguation = urlMatch[5] || urlMatch[8] || \"\";\n\n      if (\"File:\" != namespace) {\n        url = namespace + capitalizeFirst(rootUrl) + disambiguation;\n        url = url.replace(/ /g, \"_\"); // convert to valid URL\n        displayText = nonePipe ? fullUrl : trailingPipe ? rootUrl : displayText;\n\n        if (suffixStr) {\n          displayText += suffixStr;\n        }\n\n        displayText = [{ elementName: \"Text\", text: displayText }];\n        return {\n          type: \"wikiLink\",\n          url,\n          displayText\n        };\n      }\n    }\n\n    // For handling format like:\n    // [[File:Gatera de ademuz.jpg|thumb|left|A ''{{lang|es|gatera}}''\n    // in [[Rincón de Ademuz]]\n\n    let chunks = plain.slice(2, -2).split(\"|\");\n    let first = chunks[0];\n    let R_MEDIA = /^(File|Image|Media):(.*)$/i;\n    if ((match = R_MEDIA.exec(first))) {\n      let type = \"media\",\n        supType = capitalizeFirst(match[1]),\n        rootUrl = capitalizeFirst(match[2]),\n        url = `${supType}:${rootUrl}`;\n      let meta = { type, supType, url },\n        options = [],\n        caption = [];\n      let R_OPTION = /^(border|frame(less)?|thumb(nail)?|((\\d+)?x)?\\d+px|upright[ =]\\d+\\.\\d+|upright=?|left|right|cent(er|re)|none|baseline|sub|super|top|text-top|middle|bottom|text-bottom|(alt|page|class|lang|link)=.+)$/i,\n        R_ATTRIBUTE = /^(alt|page|class|lang|link)=(.*$)/i;\n\n      for (const chunk of chunks.slice(1)) {\n        // console.log(chunk);\n        if (!R_OPTION.test(chunk)) {\n          caption.push(chunk);\n          continue;\n        }\n\n        let match;\n        if ((match = R_ATTRIBUTE.exec(chunk))) {\n          options.push({ key: match[1], value: match[2] });\n        } else options.push(chunk);\n      }\n\n      caption = main(caption.join(\"|\")).children;\n      return { ...meta, options, caption };\n    }\n  }\n  return { children: content };\n};\n\nconst Comment = {\n    elementName: \"Comment\",\n    startToken: \"<!--\",\n    endToken: [\"-->\"],\n    allowedChildren: []\n  },\n  Break = {\n    elementName: \"Break\",\n    startToken: \"<br />\",\n    endToken: [],\n    allowedChildren: [],\n    selfClose: true\n  },\n  BoldItalic = {\n    elementName: \"BoldItalic\",\n    startToken: \"'''''\",\n    endToken: [\"'''''\"],\n    allowedChildren: []\n  },\n  Bold = {\n    elementName: \"Bold\",\n    startToken: \"'''\",\n    endToken: [\"'''\"],\n    allowedChildren: []\n  },\n  Italic = {\n    elementName: \"Italic\",\n    startToken: \"''\",\n    endToken: [\"''\"],\n    allowedChildren: []\n  },\n  Gallery = {\n    elementName: \"Gallery\",\n    startToken: \"<gallery\",\n    endToken: [\"</gallery>\"],\n    allowedChildren: []\n  },\n  Link = {\n    elementName: \"Link\",\n    startToken: \"[[\",\n    endToken: [\"]]\"],\n    allowedChildren: [Bold, Italic]\n  },\n  ExternalLink = {\n    elementName: \"ExternalLink\",\n    startToken: \"[\",\n    endToken: [\"]\"],\n    allowedChildren: []\n  },\n  Heading1 = {\n    elementName: \"Heading1\",\n    startToken: \"==\",\n    endToken: [\"==\"],\n    allowedChildren: []\n  },\n  Heading2 = {\n    elementName: \"Heading2\",\n    startToken: \"===\",\n    endToken: [\"===\"],\n    allowedChildren: []\n  },\n  Heading3 = {\n    elementName: \"Heading3\",\n    startToken: \"====\",\n    endToken: [\"====\"],\n    allowedChildren: []\n  },\n  Heading4 = {\n    elementName: \"Heading4\",\n    startToken: \"=====\",\n    endToken: [\"=====\"],\n    allowedChildren: []\n  },\n  Heading5 = {\n    elementName: \"Heading5\",\n    startToken: \"======\",\n    endToken: [\"======\"],\n    allowedChildren: []\n  },\n  Heading6 = {\n    elementName: \"Heading6\",\n    startToken: \"=======\",\n    endToken: [\"=======\"],\n    allowedChildren: []\n  },\n  Reference = {\n    elementName: \"Reference\",\n    startToken: \"<ref\",\n    endToken: [\"</ref>\", \"/>\"],\n    allowedChildren: []\n  },\n  Template = {\n    elementName: \"Template\",\n    startToken: \"{{\",\n    endToken: [\"}}\"],\n    allowedChildren: []\n  },\n  BlockQuote = {\n    elementName: \"Block Quote\",\n    startToken: \"<blockquote>\",\n    endToken: [\"</blockquote>\"],\n    allowedChildren: [Italic, Bold, BoldItalic]\n  },\n  PairPipe = {\n    elementName: \"PairPipe\",\n    startToken: null,\n    endToken: [\"|\"],\n    allowedChildren: []\n  },\n  Global = {\n    elementName: \"Global\",\n    startToken: null,\n    endToken: null,\n    allowedChildren: [\n      Comment,\n      Gallery,\n      Break,\n      BoldItalic,\n      Bold,\n      Italic,\n      Link,\n      ExternalLink,\n      Heading6,\n      Heading5,\n      Heading4,\n      Heading3,\n      Heading2,\n      Heading1,\n      Reference,\n      BlockQuote,\n      Template\n    ]\n  };\n\nLink.allowedChildren.push(Link);\nItalic.allowedChildren.push(Link);\nReference.allowedChildren.push(Break, Template);\nTemplate.allowedChildren.push(Template, Reference, Link);\nPairPipe.allowedChildren = Global.allowedChildren;\n\nconst analyseHeadings = headings => {\n  if (!headings.length) return null;\n  let getLevel = heading => +/^Heading(\\d)$/.exec(heading.elementName)[1];\n  let currentLevel = 0,\n    res = {},\n    currentHeading = res;\n\n  res.indices = [];\n\n  for (const heading of headings) {\n    let level = getLevel(heading),\n      headingText = heading.children[0].text.trim(),\n      headingId = headingText.replace(/\\s/, \"\") + \"_\" + level;\n\n    // add metadata\n    heading.level = level;\n    heading.text = headingText;\n    heading.id = headingId;\n    heading.className = \"wiki-heading-\" + level;\n    heading.indices = currentHeading.indices.slice();\n\n    // connect heading to heading tree\n    if (level > currentLevel) {\n      heading.indices.push(1);\n\n      if (!currentHeading.childrenHeadings)\n        currentHeading.childrenHeadings = [];\n      heading.parentHeading = currentHeading;\n      currentHeading.childrenHeadings.push(heading);\n    } else if (level == currentLevel) {\n      heading.indices[heading.indices.length - 1]++;\n\n      let parent = currentHeading.parentHeading;\n      parent.childrenHeadings.push(heading);\n      heading.parentHeading = parent;\n    } else {\n      heading.indices = heading.indices.slice(0, level);\n      heading.indices[heading.indices.length - 1]++;\n\n      let grandParent = currentHeading.parentHeading.parentHeading;\n      grandParent.childrenHeadings.push(heading);\n      heading.parentHeading = grandParent;\n    }\n    currentHeading = heading;\n    currentLevel = level;\n  }\n  return res;\n};\n\nconst parse = (str, strlen, index, e) => {\n  let buffer = \"\",\n    has,\n    plain = \"\",\n    nextElement,\n    content = [],\n    options = {},\n    referenceIndex = 0,\n    images = [],\n    headings = [],\n    nextPlain,\n    hasSelfClose;\n\n  strlen = strlen === null ? str.length : strlen;\n  let { elementName, startToken, endToken, allowedChildren } = e;\n  index += startToken === null ? 0 : startToken.length;\n  plain += startToken === null ? \"\" : startToken;\n\n  while (index < strlen) {\n    // console.log(index);\n    hasSelfClose = false;\n    has = false;\n    for (const matchElement of allowedChildren) {\n      if (!taste(str, matchElement.startToken, index)) continue;\n      has = true;\n      if (buffer) content.push({ elementName: \"Text\", text: buffer });\n      buffer = \"\";\n\n      if ((hasSelfClose = matchElement.selfClose)) {\n        content.push({ elementName: matchElement.elementName });\n        plain += matchElement.startToken;\n        index += matchElement.startToken.length;\n        break;\n      }\n\n      [index, nextElement, nextPlain] = parse(str, strlen, index, matchElement);\n      plain += nextPlain;\n      content.push(nextElement);\n\n      if (matchElement.elementName == \"Reference\") {\n        nextElement.referenceIndex = ++referenceIndex;\n      }\n      if (/^Heading/.exec(nextElement.elementName) !== null) {\n        headings.push(nextElement);\n      }\n\n      if (\n        nextElement.elementName == \"Link\" &&\n        nextElement.type == \"media\" &&\n        nextElement.supType == \"File\"\n      ) {\n        images.push(nextElement);\n      }\n\n      if (nextElement.elementName == \"Gallery\") {\n        images.push(...nextElement.images);\n      }\n\n      break;\n    }\n\n    if (hasSelfClose) continue;\n\n    if (!has) {\n      if (endToken) {\n        let catchEndToken = false;\n        for (const eToken of endToken) {\n          if (taste(str, eToken, index)) {\n            catchEndToken = true;\n            index += eToken.length;\n            plain += eToken;\n\n            if (e.elementName == \"Link\") {\n              while (index < strlen) {\n                let nowiki = \"<nowiki />\";\n                if (taste(str, nowiki, index)) {\n                  index += nowiki.length;\n                  break;\n                } else if (/\\w/.test(str[index])) {\n                  plain += str[index++];\n                } else break;\n              }\n            }\n          } // end taste\n        } // end for endToken\n        if (catchEndToken) break;\n      } // end if endToken\n\n      if (index < strlen) {\n        plain += str[index];\n        buffer += str[index++];\n      }\n    } // end not has\n  }\n\n  if (buffer) content.push({ elementName: \"Text\", text: buffer });\n\n  let res = [\n    index,\n    clean({\n      elementName,\n      headings: analyseHeadings(headings),\n      images,\n      ...internalParse(e, content, plain, options)\n    }),\n    plain\n  ];\n\n  // if (elementName == \"Gallery\")\n  //   console.dir({ parsed: JSON.stringify(res[1]), plain });\n\n  return res;\n};\n\nconst main = str => (str ? parse(str, null, 0, Global)[1] : \"\");\n\n// const second = str => parse(str, null, 0, PairPipe)[1];\nexport { main, clean, trimQuote };\n\n// console.log(\n//   JSON.stringify(\n//     main(\n//       `{{Redirect2|NYC|New York, New York|4=New York City (disambiguation)|5=and|6=NYC (disambiguation)|7=and|8=New York, New York (disambiguation)}}\n// {{Use mdy dates|date=January 2020}}\n// {{Short description|Largest city in the United States}}\n// <!-- Don't add a particular image size to most images of this article; it will be reverted. The images need to be able to customize from personal preferences. -->\n// {{Infobox settlement\n// | name                     = New York<!-- DO NOT change without discussion -->\n// | official_name            = <!-- DO NOT add to this parameter without consensus -->\n// | settlement_type          = [[City (New York)|City]]\n// | named_for                = [[James II of England|James, Duke of York]]\n// |image_skyline             = {{multiple image\n// | border                   = infobox\n// | total_width              = 290\n// | image_style              = border:1;\n// | perrow                   = 1/3/2/2\n// | image1                   = Lower Manhattan skyline - June 2017.jpg\n// | image2                   = Central park pond.jpg\n// | image3                   = Unisphere Flushing Meadows Queens.jpg\n// | image4                   = Brooklyn Bridge, west tower (7433306334).jpg\n// | image5                   = LadyLiberty02.jpg\n// | image6                   = Times_square_night.jpg\n// | image7                   = Midtown Manhattan 2019.jpg\n// | image8                   = Manhattan Bridge 2 (6214831091).jpg\n// }}\n// | image_caption            = From top, left to right: [[Lower Manhattan]], [[Central Park]], the [[Unisphere]], the [[Brooklyn Bridge]], [[Statue of Liberty]], [[Times Square]], [[Midtown Manhattan]], [[Manhattan Bridge]]\n// | image_flag               = Flag of New York City.svg\n// | image_seal               = Seal_of_New_York_City_BW.svg\n// | image_blank_emblem       = NYC Logo Wolff Olins.svg\n// | blank_emblem_type        = [[Wordmark]]\n// | nickname                 = ''See [[Nicknames of New York City]]''\n// <!-- maps and coordinates -->\n// | image_map                = {{Maplink|frame=yes|plain=y|frame-width=290|frame-height=270|frame-align=center|stroke-width=3|zoom=9|frame-lat=40.7|frame-long=-73.944|type=shape-inverse|stroke-color=#808080|id=Q60|title=New York City}}\n// | mapsize                  =\n// | map_caption              = Interactive map outlining New York City\n// | pushpin_map              = New York#USA#North America\n// | pushpin_relief           = 1\n// |pushpin_mapsize           = 290px\n// | pushpin_map_caption      = Location within the state of New York##Location within the United States##Location within North America\n// | pushpin_label            = New York\n// | pushpin_label_position   = left\n// | coordinates              = {{coord|40.661|N|73.944|W|region:US-NY|format=dms|display=inline,title}}\n// | coor_pinpoint            = <!-- to specify exact location of coordinates (was coor_type) -->\n// | coordinates_footnotes    =<ref name=\"GR1\">{{cite web |url=https://www.census.gov/geographies/reference-files/time-series/geo/gazetteer-files.html |publisher=[[United States Census Bureau]] |accessdate=April 23, 2011 |date=February 12, 2011 |title=US Gazetteer files: 2010, 2000, and 1990}}</ref>\n// | subdivision_type         = Country\n// | subdivision_name         = {{nowrap|{{flag|United States}}}}\n// | subdivision_type2        = State\n// | subdivision_name2        = {{flag|New York}}\n// ----\n// | subdivision_type3        = [[List of regions of the United States|Region]]\n// | subdivision_name3        = [[Mid-Atlantic (United States)|Mid-Atlantic]]\n// | subdivision_type4        = [[County (United States)|Constituent counties]] ([[Boroughs of New York City|boroughs]])\n// | subdivision_name4        = [[The Bronx|Bronx (The Bronx)]]<br />[[Brooklyn|Kings (Brooklyn)]]<br />[[Manhattan|New York (Manhattan)]]<br />[[Queens|Queens (Queens)]]<br />[[Staten Island|Richmond (Staten Island)]]\n// ----\n// | subdivision_type5        = [[Colony|Historic colonies]]\n// | subdivision_name5        = [[New Netherland]]<br />[[Province of New York]]\n// | established_title        = Settled\n// | established_date         = 1624\n// | established_title1       = [[City of Greater New York|Consolidated]]\n// | established_date1        = 1898\n// | established_title2       =\n// | government_footnotes     =\n// | government_type          = [[Mayor–council government|Mayor–Council]]\n// | governing_body           = [[New York City Council]]\n// | leader_title             = [[Mayor of New York City|Mayor]]\n// | leader_name              = [[Bill de Blasio]] ([[Democratic Party (United States)|D]])\n// | total_type               = Total\n// | unit_pref                = Imperial\n// | area_footnotes           =<ref name=\"GR1\" />\n// | area_total_sq_mi         = 468.484\n// | area_land_sq_mi          = 302.643\n// | area_water_sq_mi         = 165.841\n// | area_metro_sq_mi         = 13318\n// | elevation_footnotes      =<ref name=\"GR3\">{{cite web |url=http://geonames.usgs.gov |accessdate=January 31, 2008 |title=US Board on Geographic Names |publisher=[[United States Geological Survey]] |date=June 23, 2018}} Search for feature ID 975772.</ref>\n// | elevation_m              = 10\n// | elevation_ft             = 33\n// | population_rank          = [[List of United States cities by population|1st in the U.S.]]\n// | population_density_sq_mi = 27,751\n// | population_as_of         = [[2010 United States Census|2010]]\n// | population_total         = 8175133\n// | population_footnotes     =<ref name=Census2010>[https://www.census.gov Community Facts for New York City] , [[United States Census Bureau]]. Retrieved May 26, 2017.</ref>\n// | population_est           = 8398748\n// | pop_est_as_of            = 2018\n// | pop_est_footnotes        =<ref name=2018Estimate />\n// | population_blank1_title  = [[Metropolitan statistical area|MSA (2018)]]\n// | population_blank1        = 19,979,477<ref name=\"MetroEst\">{{cite web|url=https://factfinder.census.gov/bkmk/table/1.0/en/PEP/2017/GCTPEPANNR.US24PR|title=Annual Estimates of the Resident Population: April 1, 2010 to July 1, 2017—Metropolitan Statistical Area; and for Puerto Rico—2017 Population Estimates|publisher=U.S. Census Bureau|accessdate=March 24, 2018|archive-url=https://archive.today/20200213005215/https://factfinder.census.gov/bkmk/table/1.0/en/PEP/2017/GCTPEPANNR.US24PR|archive-date=February 13, 2020|url-status=dead}}</ref> ([[List of metropolitan statistical areas|1st]])\n// | population_blank2_title  = [[New York metropolitan area|CSA (2018)]]\n// | population_blank2        = 22,679,948<ref name=CombinedEst>{{cite web |url=https://www.census.gov |title=Annual Estimates of the Resident Population: April 1, 2010 to July 1, 2018—Combined Statistical Area; and for Puerto Rico—2017 Population Estimates |publisher=U.S. Census Bureau |accessdate=April 27, 2018 }}</ref> ([[List of Combined Statistical Areas|1st]])\n// | population_demonym       = New Yorker\n// | blank6_name              = [[GDP]] (City, 2018)\n// | blank6_info              = $842.3&nbsp;billion<ref name=\"bea.gov\">[https://www.bea.gov/system/files/2019-12/lagdp1219.pdf ''Local Area Gross Domestic Product, 2018''], [[Bureau of Economic Analysis]], released December 17, 2019. Accessed December 12, 2019.</ref> (1st)\n// | blank7_name              = [[Gross metropolitan product|GMP]] (Metro, 2020)\n// | blank7_info              = $2.0&nbsp;trillion<ref name=\"NYCMetroGMP\">{{cite web|url=https://www.statista.com/statistics/183808/gmp-of-the-20-biggest-metro-areas/|title=U.S. metro areas—ranked by Gross Metropolitan Product (GMP) 2020 {{!}} Statistic|website=Statista|accessdate=May 31, 2019}}</ref> (1st)\n// | timezone1                = [[Eastern Time Zone|EST]]\n// | utc_offset1              = −05:00\n// | timezone1_DST            = [[Eastern Time Zone|EDT]]\n// | utc_offset1_DST          = −04:00\n// | postal_code_type         = [[ZIP Code]]s\n// | postal_code              = 100xx–104xx, 11004–05, 111xx–114xx, 116xx\n// | area_code                = [[Area codes 212, 646, and 332|212/646/332]], [[Area codes 718, 347, and 929|718/347/929]], [[Area code 917|917]]\n// | blank_name               = [[Federal Information Processing Standards|FIPS code]]\n// | blank_info               = 36-51000\n// | blank1_name              = [[Geographic Names Information System|GNIS]] feature ID\n// | blank1_info              = 975772\n// | blank2_name              = Major airports\n// | blank2_info              = [[John F. Kennedy International Airport]], [[Newark Liberty International Airport]], [[LaGuardia Airport]]\n// | blank4_name              = [[Commuter rail]]\n// | blank4_info              = [[LIRR]], [[Metro-North]], [[NJ Transit Rail Operations|NJ Transit]]\n// | blank5_name              = [[Rapid transit]]\n// | blank5_info              = [[New York City Subway|Subway]], [[Staten Island Railway]], [[PATH (rail system)|PATH]]\n// | blank_name_sec2          = Largest [[Boroughs of New York City|borough]] by area\n// | blank_info_sec2          = [[Queens]] {{convert|109|sqmi|km2}}\n// | blank1_name_sec2         = Largest borough by population\n// | blank1_info_sec2         = [[Brooklyn]] (2015 est 2,636,735)<ref name=BrooklynQuickFacts>{{cite web |title=State & County QuickFacts—Kings County (Brooklyn Borough), New York |url=http://quickfacts.census.gov/qfd/states/36/36047.html |publisher=United States Census Bureau |accessdate=March 24, 2016 |archiveurl=https://web.archive.org/web/20160217175357/http://quickfacts.census.gov/qfd/states/36/36047.html |archivedate=February 17, 2016}}</ref>\n// | blank2_name_sec2         = Largest borough by [[GDP]] (2018)\n// | blank2_info_sec2         = [[Manhattan]] $600.2 billion<ref name=\"bea.gov\"/>\n// | website                  = [https://www.nyc.gov/ NYC.gov]\n// | population_density_km2   = 10,715\n// }}\n\n// {{Regions of New York}}\n\n// '''New York City''' ('''NYC'''), often called the '''City of New York''' or simply '''New York''' `\n//     ),\n//     null,\n//     2\n//   )\n// );\n\n// console.log(\n//   JSON.stringify(\n//     main(`{{Infobox settlement\n// | name                     = New York<!-- DO NOT change without discussion -->\n// | official_name            = <!-- DO NOT add to this parameter without consensus -->\n// | settlement_type          = [[City (New York)|City]]\n// | named_for                = [[James II of England|James, Duke of York]]\n// |image_skyline             = {{multiple image\n// | border                   = infobox\n// | total_width              = 290\n// | image_style              = border:1;\n// | perrow                   = 1/3/2/2\n// | image1                   = Lower Manhattan skyline - June 2017.jpg\n// | image2                   = Central park pond.jpg\n// | image3                   = Unisphere Flushing Meadows Queens.jpg\n// | image4                   = Brooklyn Bridge, west tower (7433306334).jpg\n// | image5                   = LadyLiberty02.jpg\n// | image6                   = Times_square_night.jpg\n// | image7                   = Midtown Manhattan 2019.jpg\n// | image8                   = Manhattan Bridge 2 (6214831091).jpg\n// }}\n// | image_caption            = From top, left to right: [[Lower Manhattan]], [[Central Park]], the [[Unisphere]], the [[Brooklyn Bridge]], [[Statue of Liberty]], [[Times Square]], [[Midtown Manhattan]], [[Manhattan Bridge]]\n// | image_flag               = Flag of New York City.svg\n// | image_seal               = Seal_of_New_York_City_BW.svg\n// | image_blank_emblem       = NYC Logo Wolff Olins.svg\n// | blank_emblem_type        = [[Wordmark]]\n// | nickname                 = ''See [[Nicknames of New York City]]''\n// <!-- maps and coordinates -->\n// | image_map                = {{Maplink|frame=yes|plain=y|frame-width=290|frame-height=270|frame-align=center|stroke-width=3|zoom=9|frame-lat=40.7|frame-long=-73.944|type=shape-inverse|stroke-color=#808080|id=Q60|title=New York City}}\n// | mapsize                  =\n// | map_caption              = Interactive map outlining New York City\n// | pushpin_map              = New York#USA#North America\n// | pushpin_relief           = 1\n// |pushpin_mapsize           = 290px\n// | pushpin_map_caption      = Location within the state of New York##Location within the United States##Location within North America\n// | pushpin_label            = New York\n// | pushpin_label_position   = left\n// | coordinates              = {{coord|40.661|N|73.944|W|region:US-NY|format=dms|display=inline,title}}\n// | coor_pinpoint            = <!-- to specify exact location of coordinates (was coor_type) -->\n// | coordinates_footnotes    =<ref name=\"GR1\">{{cite web |url=https://www.census.gov/geographies/reference-files/time-series/geo/gazetteer-files.html |publisher=[[United States Census Bureau]] |accessdate=April 23, 2011 |date=February 12, 2011 |title=US Gazetteer files: 2010, 2000, and 1990}}</ref>\n// | subdivision_type         = Country\n// | subdivision_name         = {{nowrap|{{flag|United States}}}}\n// | subdivision_type2        = State\n// | subdivision_name2        = {{flag|New York}}\n// ----\n// | subdivision_type3        = [[List of regions of the United States|Region]]\n// | subdivision_name3        = [[Mid-Atlantic (United States)|Mid-Atlantic]]\n// | subdivision_type4        = [[County (United States)|Constituent counties]] ([[Boroughs of New York City|boroughs]])\n// | subdivision_name4        = [[The Bronx|Bronx (The Bronx)]]<br />[[Brooklyn|Kings (Brooklyn)]]<br />[[Manhattan|New York (Manhattan)]]<br />[[Queens|Queens (Queens)]]<br />[[Staten Island|Richmond (Staten Island)]]\n// ----\n// | subdivision_type5        = [[Colony|Historic colonies]]\n// | subdivision_name5        = [[New Netherland]]<br />[[Province of New York]]\n// | established_title        = Settled\n// | established_date         = 1624\n// | established_title1       = [[City of Greater New York|Consolidated]]\n// | established_date1        = 1898\n// | established_title2       =\n// | government_footnotes     =\n// | government_type          = [[Mayor–council government|Mayor–Council]]\n// | governing_body           = [[New York City Council]]\n// | leader_title             = [[Mayor of New York City|Mayor]]\n// | leader_name              = [[Bill de Blasio]] ([[Democratic Party (United States)|D]])\n// | total_type               = Total\n// | unit_pref                = Imperial\n// | area_footnotes           =<ref name=\"GR1\" />\n// | area_total_sq_mi         = 468.484\n// | area_land_sq_mi          = 302.643\n// | area_water_sq_mi         = 165.841\n// | area_metro_sq_mi         = 13318\n// | elevation_footnotes      =<ref name=\"GR3\">{{cite web |url=http://geonames.usgs.gov |accessdate=January 31, 2008 |title=US Board on Geographic Names |publisher=[[United States Geological Survey]] |date=June 23, 2018}} Search for feature ID 975772.</ref>\n// | elevation_m              = 10\n// | elevation_ft             = 33\n// | population_rank          = [[List of United States cities by population|1st in the U.S.]]\n// | population_density_sq_mi = 27,751\n// | population_as_of         = [[2010 United States Census|2010]]\n// | population_total         = 8175133\n// | population_footnotes     =<ref name=Census2010>[https://www.census.gov Community Facts for New York City] , [[United States Census Bureau]]. Retrieved May 26, 2017.</ref>\n// | population_est           = 8398748\n// | pop_est_as_of            = 2018\n// | pop_est_footnotes        =<ref name=2018Estimate />\n// | population_blank1_title  = [[Metropolitan statistical area|MSA (2018)]]\n// | population_blank1        = 19,979,477<ref name=\"MetroEst\">{{cite web|url=https://factfinder.census.gov/bkmk/table/1.0/en/PEP/2017/GCTPEPANNR.US24PR|title=Annual Estimates of the Resident Population: April 1, 2010 to July 1, 2017—Metropolitan Statistical Area; and for Puerto Rico—2017 Population Estimates|publisher=U.S. Census Bureau|accessdate=March 24, 2018|archive-url=https://archive.today/20200213005215/https://factfinder.census.gov/bkmk/table/1.0/en/PEP/2017/GCTPEPANNR.US24PR|archive-date=February 13, 2020|url-status=dead}}</ref> ([[List of metropolitan statistical areas|1st]])\n// | population_blank2_title  = [[New York metropolitan area|CSA (2018)]]\n// | population_blank2        = 22,679,948<ref name=CombinedEst>{{cite web |url=https://www.census.gov |title=Annual Estimates of the Resident Population: April 1, 2010 to July 1, 2018—Combined Statistical Area; and for Puerto Rico—2017 Population Estimates |publisher=U.S. Census Bureau |accessdate=April 27, 2018 }}</ref> ([[List of Combined Statistical Areas|1st]])\n// | population_demonym       = New Yorker\n// | blank6_name              = [[GDP]] (City, 2018)\n// | blank6_info              = $842.3&nbsp;billion<ref name=\"bea.gov\">[https://www.bea.gov/system/files/2019-12/lagdp1219.pdf ''Local Area Gross Domestic Product, 2018''], [[Bureau of Economic Analysis]], released December 17, 2019. Accessed December 12, 2019.</ref> (1st)\n// | blank7_name              = [[Gross metropolitan product|GMP]] (Metro, 2020)\n// | blank7_info              = $2.0&nbsp;trillion<ref name=\"NYCMetroGMP\">{{cite web|url=https://www.statista.com/statistics/183808/gmp-of-the-20-biggest-metro-areas/|title=U.S. metro areas—ranked by Gross Metropolitan Product (GMP) 2020 {{!}} Statistic|website=Statista|accessdate=May 31, 2019}}</ref> (1st)\n// | timezone1                = [[Eastern Time Zone|EST]]\n// | utc_offset1              = −05:00\n// | timezone1_DST            = [[Eastern Time Zone|EDT]]\n// | utc_offset1_DST          = −04:00\n// | postal_code_type         = [[ZIP Code]]s\n// | postal_code              = 100xx–104xx, 11004–05, 111xx–114xx, 116xx\n// | area_code                = [[Area codes 212, 646, and 332|212/646/332]], [[Area codes 718, 347, and 929|718/347/929]], [[Area code 917|917]]\n// | blank_name               = [[Federal Information Processing Standards|FIPS code]]\n// | blank_info               = 36-51000\n// | blank1_name              = [[Geographic Names Information System|GNIS]] feature ID\n// | blank1_info              = 975772\n// | blank2_name              = Major airports\n// | blank2_info              = [[John F. Kennedy International Airport]], [[Newark Liberty International Airport]], [[LaGuardia Airport]]\n// | blank4_name              = [[Commuter rail]]\n// | blank4_info              = [[LIRR]], [[Metro-North]], [[NJ Transit Rail Operations|NJ Transit]]\n// | blank5_name              = [[Rapid transit]]\n// | blank5_info              = [[New York City Subway|Subway]], [[Staten Island Railway]], [[PATH (rail system)|PATH]]\n// | blank_name_sec2          = Largest [[Boroughs of New York City|borough]] by area\n// | blank_info_sec2          = [[Queens]] {{convert|109|sqmi|km2}}\n// | blank1_name_sec2         = Largest borough by population\n// | blank1_info_sec2         = [[Brooklyn]] (2015 est 2,636,735)<ref name=BrooklynQuickFacts>{{cite web |title=State & County QuickFacts—Kings County (Brooklyn Borough), New York |url=http://quickfacts.census.gov/qfd/states/36/36047.html |publisher=United States Census Bureau |accessdate=March 24, 2016 |archiveurl=https://web.archive.org/web/20160217175357/http://quickfacts.census.gov/qfd/states/36/36047.html |archivedate=February 17, 2016}}</ref>\n// | blank2_name_sec2         = Largest borough by [[GDP]] (2018)\n// | blank2_info_sec2         = [[Manhattan]] $600.2 billion<ref name=\"bea.gov\"/>\n// | website                  = [https://www.nyc.gov/ NYC.gov]\n// | population_density_km2   = 10,715\n// }}`),\n//     null,\n//     2\n//   )\n// );\n\n// let s = `align = right\n//  | direction = vertical\n//  | image1 = New York City Marathon 2014 (15082977714).jpg\n//  | width1 = 225\n//  | caption1 = The [[New York City Marathon|New York Marathon]] is the largest marathon in the world.<ref name=\"NYCMarathonWorld'sLargest\">{{cite web |url=http://www.runnersworld.com/new-york-city-marathon/2017-new-york-city-marathon-entrants-by-the-numbers |title=2017 New York City Marathon Entrants By the Numbers—Applications for the world's largest race were at an all-time high for 2017 |author=Kit Fox |publisher=Runner's World—Rodale Inc |date=March 2, 2017 |accessdate=May 10, 2017}}</ref>\n//  | alt1 = Three runners in a race down a street where onlookers are cheering behind barriers.\n//  | image2 = Arthur ashe stadium interior.jpg\n//  | width2 = 225\n//  | caption2 = The [[U.S. Open (tennis)|U.S. Open Tennis Championships]] are held every August and September in [[Flushing Meadows-Corona Park]], Queens.\n//  | alt2 = A tennis stadium pack with fans watching a grass court.\n//  | image3 = Citi Field 2011.JPG\n//  | width3 = 225\n//  | caption3 = [[Citi Field]], also in Flushing Meadows-Corona Park, has been home to the [[New York Mets]] since 2009.\n//  | alt3 = A baseball stadium from behind home plate in the evening.`;\n\n// console.log(parsePairPipe(s));\n","import React from \"react\";\nimport SearchIcon from \"./../../../asset/images/search.svg\";\nimport ProfileIcon from \"./../../../asset/images/profile.svg\";\nimport \"./style.sass\";\n\nconst Menu = () => {\n  // const [position, setPosition] = React.useState(document.body.scrollTop);\n\n  // React.useEffect(() => {\n  //   function handleClickOutside() {\n  //     setPosition(document.body.scrollTop);\n  //   }\n  //   window.addEventListener(\"scroll\", handleClickOutside);\n  //   return () => window.removeEventListener(\"scroll\", handleClickOutside);\n  // }, []);\n\n  return (\n    <div className=\"menu\">\n      <div className=\"menu__left\">\n        <span className=\"logo-wiki\">Wiki</span>\n        <span className=\"logo-pedia\">pedia</span>\n      </div>\n      <div className=\"menu__main\">\n        <button className=\"menu__button button--choose\">Article</button>\n        <button className=\"menu__button\">Talk</button>\n        <button className=\"menu__button button--choose\">Read</button>\n        <button className=\"menu__button\">View source</button>\n        <button className=\"menu__button\">View history</button>\n        {/*<button className=\"menu__button\" id=\"position\">\n          {position}\n        </button>*/}\n      </div>\n      <div className=\"menu__search-icon\">\n        <SearchIcon />\n      </div>\n      <div className=\"menu__right\">\n        <input\n          type=\"text\"\n          placeholder=\"Search Wikipedia\"\n          className=\"menu__search-input\"\n        />\n        <div className=\"menu__profile-icon\">\n          <ProfileIcon />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Menu;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.607 192.803l62.401-62.402c13.063 10.67 29.263 16.475 46.356 16.475h.002c19.614 0 38.058-7.639 51.927-21.509 13.871-13.87 21.511-32.313 21.51-51.931-.001-19.616-7.64-38.058-21.509-51.928C157.425 7.639 138.982 0 119.365 0 99.749 0 81.307 7.639 67.437 21.509 53.565 35.38 45.927 53.823 45.928 73.44c0 17.094 5.805 33.294 16.475 46.355L0 182.197l10.607 10.606zM60.928 73.44c-.001-15.611 6.078-30.287 17.116-41.324C89.081 21.078 103.756 15 119.365 15c15.61 0 30.285 6.078 41.322 17.115s17.116 25.712 17.116 41.322c0 15.611-6.078 30.286-17.116 41.324-11.037 11.038-25.712 17.116-41.321 17.116-15.61-.001-30.286-6.079-41.323-17.116C67.006 103.724 60.928 89.05 60.928 73.44z\"\n});\n\nfunction SvgSearch(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 192.804 192.804\"\n  }, props), _ref);\n}\n\nexport default SvgSearch;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M100.594.002C45.119.002 0 45.12 0 100.593c0 55.469 45.122 100.591 100.598 100.591 55.465 0 100.587-45.122 100.587-100.591C201.182 45.12 156.059.002 100.594.002zm-27.5 81.469l.204-.225c.82-.598 1.22-1.528 1.07-2.505-2.029-12.19-.698-17.272-.251-18.546C77.66 49.33 88.769 44.301 90.952 43.414a11.093 11.093 0 012.19-.576l.258-.057 1.789-.097.014.111.412-.039c.372-.039.723-.093 1.163-.183l.394-.086c.351.004 4.678.551 11.102 2.523l4.466 1.539c8.167 2.412 11.928 6.904 12.623 7.805 6.539 7.412 4.792 18.599 3.167 24.608a2.509 2.509 0 00.329 2.044l.372.458c.476.644.898 3.128-.523 8.407-.268 1.6-.859 2.902-1.739 3.783a2.573 2.573 0 00-.637 1.321c-2.208 12.963-13.825 27.461-26.065 27.461-10.386 0-22.243-13.342-24.376-27.45a2.575 2.575 0 00-.669-1.389c-.891-.916-1.453-2.244-1.797-4.209-1.025-3.705-1.132-6.679-.331-7.917zM49.778 137.68c.451-.573 2.96-3.514 8.042-5.451 4.466-1.374 15.504-5.039 21.541-9.416.283-.154.562-.444.791-.684a49.053 49.053 0 012.423-2.459l.562-.533.573.537c5.315 5.014 11.198 7.763 16.559 7.763 5.637 0 11.452-2.441 16.821-7.061l.422-.365 1.138.555c1.016.934 2.781 2.215 3.6 2.609l1.045.508-.107.115.465.283a44.004 44.004 0 003.335 1.804c1.278.562 2.344.981 3.454 1.342.93.301 5.898 1.972 11.549 4.585l1.077.322c5.522 2.115 7.977 5.053 8.224 5.361 6.553 9.72 9.072 27.854 10.006 37.961-17.128 13.911-38.677 21.57-60.697 21.57-22.035 0-43.587-7.662-60.708-21.573.917-10.076 3.411-28.156 9.885-37.773zm105.705-2.985l-.347-.404c-1.632-2.033-5.222-4.899-10.443-6.9l-.823-.247a117.918 117.918 0 00-11.757-4.645l-.14.412.036-.444a32.672 32.672 0 01-2.874-1.127c-5.952-2.924-6.71-4.627-6.839-5.021l-.297-.676.261-.616c4.474-5.583 7.612-12.086 8.815-18.213l.15-.372c1.26-1.575 2.054-3.436 2.369-5.476 1.417-5.128 1.485-8.904.2-11.535l-.122-.268.068-.293c1.589-6.642 3.114-19.097-4.513-27.754-1.206-1.525-5.826-6.685-14.956-9.359l-4.438-1.525c-7.383-2.273-12-2.766-12.601-2.77-.497 0-.913.047-1.539.193l-.587.1a6.652 6.652 0 00-.998-.072c-2.358 0-4.914 1.02-5.035 1.063-2.555 1.07-15.543 7.065-19.655 19.791-.676 1.8-2.076 7.301-.279 19.344l.057.34-.211.283c-1.847 2.477-1.99 6.506-.444 11.921.39 2.398 1.174 4.313 2.337 5.766l.2.429c1.124 6.292 3.926 12.515 8.099 17.991l.361.487-.329.49c-.179.251-.308.53-.351.73-1.031 2.931-12.544 8.07-22.647 11.159-7.383 2.791-10.508 7.258-10.508 7.258-6.259 9.291-9.126 24.923-10.44 36.723-19.787-18.245-31.104-44.023-31.104-70.865 0-53.171 43.258-96.429 96.436-96.429 53.171 0 96.436 43.258 96.436 96.429 0 26.845-11.334 52.634-31.122 70.89-1.346-11.89-4.245-27.586-10.426-36.788z\",\n  fill: \"#010002\"\n});\n\nfunction SvgProfile(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 201.185 201.185\"\n  }, props), _ref);\n}\n\nexport default SvgProfile;","import React, { useRef } from \"react\";\nimport LeftButton from \"./../../../asset/images/left.svg\";\nimport RightButton from \"./../../../asset/images/right.svg\";\nimport \"./style.sass\";\n\nconst Navigation = ({ headings }) => {\n  const headingsRef = useRef(null);\n\n  const handle = direction => {\n    let width = headingsRef.current.scrollWidth;\n    let pos = headingsRef.current.scrollLeft;\n    let visibleWidth = headingsRef.current.clientWidth;\n    let maxPos = width - visibleWidth;\n    let slideWidth = maxPos * 0.15;\n\n    console.log({ width, pos, visibleWidth, maxPos });\n    headingsRef.current.scrollLeft =\n      direction == \"right\"\n        ? Math.min(maxPos, pos + slideWidth)\n        : Math.max(0, pos - slideWidth);\n  };\n\n  const handle2 = id => {\n    let heading = document.getElementById(id);\n    let body = document.body;\n    body.scrollTop =\n      heading.offsetTop -\n      document.getElementsByClassName(\"menu\")[0].offsetHeight;\n  };\n  return (\n    <div className=\"navigation\">\n      <div className=\"navigation__content\">\n        <button\n          onClick={() => handle(\"left\")}\n          className=\"navigation__button navigation__left-button\"\n        >\n          <LeftButton />\n        </button>\n        <div ref={headingsRef} className=\"navigation__headings\">\n          {headings &&\n            headings.childrenHeadings.map((heading, index) => {\n              return (\n                <button key={index} onClick={() => handle2(heading.id)}>\n                  {heading.text}\n                </button>\n              );\n            })}\n        </div>\n        <button\n          onClick={() => handle(\"right\")}\n          className=\"navigation__button navigation__right-button\"\n        >\n          <RightButton />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Navigation;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256 0C114.833 0 0 114.833 0 256s114.833 256 256 256 256-114.833 256-256S397.167 0 256 0zm0 490.667C126.604 490.667 21.333 385.396 21.333 256S126.604 21.333 256 21.333 490.667 126.604 490.667 256 385.396 490.667 256 490.667z\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M306.208 131.125c-4.167-4.167-10.917-4.167-15.083 0L173.792 248.458c-4.167 4.167-4.167 10.917 0 15.083l117.333 117.333a10.634 10.634 0 007.542 3.125c2.729 0 5.458-1.042 7.542-3.125 4.167-4.167 4.167-10.917 0-15.083L196.417 256l109.792-109.792c4.166-4.166 4.166-10.916-.001-15.083z\"\n});\n\nfunction SvgLeft(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"left_svg__navigation__icon left_svg__icon-left\",\n    viewBox: \"0 0 512 512\"\n  }, props), _ref, _ref2);\n}\n\nexport default SvgLeft;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256 0C114.833 0 0 114.833 0 256s114.833 256 256 256 256-114.833 256-256S397.167 0 256 0zm0 490.667C126.604 490.667 21.333 385.396 21.333 256S126.604 21.333 256 21.333 490.667 126.604 490.667 256 385.396 490.667 256 490.667z\"\n});\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M220.875 131.125c-4.167-4.167-10.917-4.167-15.083 0-4.167 4.167-4.167 10.917 0 15.083L315.583 256 205.792 365.792c-4.167 4.167-4.167 10.917 0 15.083a10.634 10.634 0 007.542 3.125c2.729 0 5.458-1.042 7.542-3.125l117.333-117.333c4.167-4.167 4.167-10.917 0-15.083L220.875 131.125z\"\n});\n\nfunction SvgRight(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: \"right_svg__navigation__icon right_svg__icon-right\",\n    viewBox: \"0 0 512 512\"\n  }, props), _ref, _ref2);\n}\n\nexport default SvgRight;"],"sourceRoot":""}